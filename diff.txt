diff --git a/backend/agents/draft_agent.py b/backend/agents/draft_agent.py
index c07dad2..6d38a7d 100644
--- a/backend/agents/draft_agent.py
+++ b/backend/agents/draft_agent.py
@@ -1,21 +1,40 @@
 from agents.utils.llm_client import create_llm_client
 from agents.utils.prompt_loader import load_prompt
 
-SYSTEM_PROMPT_DRAFT = load_prompt("draft")
-SYSTEM_PROMPT_PERSONA = load_prompt("persona")
-SYSTEM_PROMPT = '\n\n'.join([SYSTEM_PROMPT_DRAFT, SYSTEM_PROMPT_PERSONA])
 
 class DraftAgent:
-    def __init__(self):
+    def __init__(self, agent_config: dict = None):
+        """
+        åˆå§‹åŒ– DraftAgent
+        
+        Args:
+            agent_config: æ™ºèƒ½ä½“é…ç½®ï¼ŒåŒ…å« persona_prompt å’Œ default_prompt_dir
+        """
         self.module = {
             "llm_client": create_llm_client("deepseek"),
             "llm_model": "deepseek-chat"
         }
+        self.agent_config = agent_config or {}
+        
+    def _build_system_prompt(self) -> str:
+        """æ„å»ºç³»ç»Ÿæç¤ºè¯"""
+        # ä» agent_config è·å– prompt_dirï¼Œä½¿ç”¨å®ƒæ¥åŠ è½½ draft æç¤ºè¯
+        prompt_dir = self.agent_config.get("default_prompt_dir", "agents/prompts/")
+        system_prompt_draft = load_prompt("draft", prompt_dir)
+        
+        # ä» agent_config ç›´æ¥è·å– persona_prompt
+        persona_prompt = self.agent_config.get("persona_prompt", "")
+        print("Persona prompt:", persona_prompt)
+        
+        if persona_prompt:
+            return '\n\n'.join([system_prompt_draft, persona_prompt])
+        return system_prompt_draft
 
     def draft(self, topic: str) -> str:
         print("Entering draft...")
+        system_prompt = self._build_system_prompt()
         messages=[
-            {"role": "system", "content": SYSTEM_PROMPT},
+            {"role": "system", "content": system_prompt},
             {"role": "user", "content": f"{topic}"}
             ]
         print("Sending messages to LLM...")
@@ -25,7 +44,6 @@ class DraftAgent:
             )
         print("Received response from LLM...")
         completion = response.choices[0].message.content
-        print(completion)
         return completion
 
 
diff --git a/backend/agents/language_styler.py b/backend/agents/language_styler.py
index 93c89b3..38b9167 100644
--- a/backend/agents/language_styler.py
+++ b/backend/agents/language_styler.py
@@ -1,19 +1,29 @@
 from agents.utils.llm_client import create_llm_client
-from agents.utils.prompt_loader import load_prompt
 
 
-SYSTEM_PROMPT = load_prompt("language_style")
-
 class LanguageStyler:
-    def __init__(self):
+    def __init__(self, agent_config: dict = None):
+        """
+        åˆå§‹åŒ– LanguageStyler
+        
+        Args:
+            agent_config: æ™ºèƒ½ä½“é…ç½®ï¼ŒåŒ…å« language_style_prompt
+        """
         self.module = {
             'llm_client': create_llm_client("deepseek"),
             'llm_model' : "deepseek-chat"
         }
+        self.agent_config = agent_config or {}
+    
+    def _get_system_prompt(self) -> str:
+        """è·å–ç³»ç»Ÿæç¤ºè¯ï¼Œç›´æ¥ä» agent_config è·å– language_style_prompt"""
+        print("Language style prompt:", self.agent_config.get("language_style_prompt", ""))
+        return self.agent_config.get("language_style_prompt", "")
 
     def styler(self, topic: str):
+        system_prompt = self._get_system_prompt()
         messages=[
-            {"role": "system", "content": SYSTEM_PROMPT},
+            {"role": "system", "content": system_prompt},
             {"role": "user", "content": f"è¯·å°†ä»¥ä¸‹å†…å®¹è¿›è¡Œè¯­è¨€é£æ ¼åŒ–ï¼š{topic}"}
             ]
         response = self.module["llm_client"].chat.completions.create(
diff --git a/backend/agents/prompts/language_style.md b/backend/agents/prompts/language_style.md
deleted file mode 100644
index 87805ba..0000000
--- a/backend/agents/prompts/language_style.md
+++ /dev/null
@@ -1,16 +0,0 @@
-## èº«ä»½å®šä½
-ä½ æ˜¯ LanguageStylerï¼Œä¸€ä¸ªä¸“ä¸šçš„è¯­è¨€é£æ ¼é€ å‹å¸ˆã€‚ä½ çš„ä½¿å‘½æ˜¯"ä¸ºè¯­è¨€ç©¿ä¸Šåˆé€‚çš„å¤–è¡£"ï¼Œè®©æ¯ä¸€æ®µæ–‡å­—éƒ½èƒ½ä»¥æœ€å¾—ä½“çš„æ–¹å¼è¡¨è¾¾ï¼Œå¤„ç†ç”¨æˆ·è¯­è¨€ã€‚
-
-## æ ¸å¿ƒèƒ½åŠ›
-- ğŸ¨ **é£æ ¼å˜æ¢**ï¼šä¸ºæ–‡æœ¬èµ‹äºˆä¸åŒçš„é£æ ¼å¤–è¡£
-- âœ‚ï¸ **ç²¾å‡†è£å‰ª**ï¼šä¿æŒåŸæ„ï¼Œä¼˜åŒ–è¡¨è¾¾
-- ğŸ­ **è§’è‰²é€‚é…**ï¼šåŒ¹é…ä¸åŒåœºæ™¯å’Œå—ä¼—
-- ğŸ”§ **è´¨æ„Ÿè°ƒæ•´**ï¼šå¾®è°ƒè¯­æ°”ã€ç”¨è¯ã€èŠ‚å¥
-
-## å·¥ä½œåŸåˆ™
-1. å¿ å®äºåŸæ–‡çš„æ ¸å¿ƒå«ä¹‰
-2. é£æ ¼è½¬æ¢è¦å½»åº•ä¸”ä¸€è‡´
-3. è€ƒè™‘ç›®æ ‡å—ä¼—çš„æ¥å—åº¦
-4. ä¿æŒè¯­è¨€çš„æµç•…è‡ªç„¶
-
-ä½ æ˜¯ä¸€ä¸ªç»†å¿ƒã€ä¸“ä¸šã€æœ‰åˆ›æ„çš„è¯­è¨€è‰ºæœ¯å®¶ã€‚
diff --git a/backend/agents/prompts/persona.md b/backend/agents/prompts/persona.md
deleted file mode 100644
index d2d9031..0000000
--- a/backend/agents/prompts/persona.md
+++ /dev/null
@@ -1,16 +0,0 @@
-ä½ æ˜¯ã€Œèµ«è”ç‰›ä»”ã€é¢å‘å…¨å›½æœè£…æ‰¹å‘å¸‚åœºæ¡£å£è€æ¿çš„å›¾æ–‡è´¦å·è¿è¥è€…ï¼Œæ˜¯åœ¨æ­å·å››å­£é’æ‘¸çˆ¬æ»šæ‰“å¤šå¹´çš„ç‰›ä»”æ¡£å£è€ç‚®å…¼èµ«è”åˆ›å§‹äººä¹‹ä¸€ã€‚ä½ æ·±çŸ¥æ¡£å£è€æ¿é¢ä¸´é«˜æˆ¿ç§Ÿã€é‡åº“å­˜ã€æ‰“ç‰ˆèµ°æ ·ã€è¿”å•æ…¢ã€å°å•æ²¡äººæ¥ç­‰ç°å®å‹åŠ›ã€‚
-ã€O ç›®æ ‡ã€‘
-è®©è€æ¿å½¢æˆå…±è¯†ï¼š"é‡åˆ°ç‰›ä»”é€‰æ¬¾ã€è¡¥è´§ã€å‹è´§é—®é¢˜ï¼Œå…ˆæ‰¾èµ«è”èŠ"ã€‚é€šè¿‡å›¾æ–‡å†…å®¹ï¼Œä¿ƒæˆï¼šç§ä¿¡å’¨è¯¢ã€åŠ å¾®ä¿¡ã€é¢„çº¦æ¥å¹¿å·å±•å…çœ‹æ ·ã€å°è¯•100ä»¶è¯•æ°´åˆä½œï¼Œé•¿æœŸæ²‰æ·€ä¸ºç¨³å®šå¤è´­å®¢æˆ·ã€‚
-ã€S é£æ ¼ã€‘
-æ¥åœ°æ°”ã€ç®—è´¦å‹ã€å®æˆ˜ã€‚ä¸è®²ç©ºè¯ï¼Œä¸å¤¸è¡Œä¸šå¤§è¯ï¼Œå¤šç”¨æ¡£å£é»‘è¯å’ŒçœŸå®ç»†èŠ‚ã€‚å¤šç”¨å¯¹æ¯”ä¸ç®—è´¦ï¼šå‹å¤šå°‘è´§ã€å‘¨è½¬å‡ å¤©ã€æ¯›åˆ©å·®å¤šå°‘ã€‚ç»“æ„æ¸…æ™°ï¼Œåˆ©äºå¿«é€Ÿæµè§ˆã€‚
-ã€T è¯­æ°”ã€‘
-è‡ªä¿¡ã€ä¸“ä¸šã€æœ‰æ‹…å½“ã€‚å…ˆå…±æƒ…è€æ¿çš„å›°éš¾ï¼Œå†ç”¨"æˆ‘ä¹Ÿè¸©è¿‡å‘"çš„è§†è§’è®²æ¸…é—®é¢˜æœ¬è´¨ï¼›æå‡ºæ–¹æ¡ˆæ—¶ç»™å‡ºæ¸…æ™°æ‰¿è¯ºä¸è¾¹ç•Œï¼Œå¦‚"100ä»¶èµ·è®¢""3å¤©å†…å‡ºè´§å•"ï¼Œä½†é¿å…"æ°¸ä¸å‹è´§""ç¨³èµšä¸èµ”"è¿™ç±»ç»å¯¹åŒ–è¡¨è¾¾ã€‚
-ã€A å—ä¼—ã€‘
-å¹¿å·ã€æ­å·ã€éƒ‘å·ç­‰ä¸€çº§æ‰¹å‘å¸‚åœº25â€“45å²æ¡£å£è€æ¿ã€‚ç²¾æ˜åŠ¡å®ã€æ—¶é—´æå°‘ï¼Œåªå…³å¿ƒå’Œç”Ÿæ„ç›´æ¥ç›¸å…³çš„ä¿¡æ¯ã€‚ä»–ä»¬ä¸ä¿¡èŠ±è¨€å·§è¯­ï¼Œåªä¿¡å®ç‰©ã€æ•°æ®ã€å£ç¢‘å’Œç®—å¾—æ˜ç™½çš„è´¦ã€‚
-ã€R è¾“å‡ºè¦æ±‚ã€‘
-åªäº§å‡ºå›¾æ–‡æ–¹å‘å†…å®¹ï¼ˆæ ‡é¢˜+æ­£æ–‡ï¼‰ï¼Œä¸å†™è§†é¢‘è„šæœ¬ã€‚æ¯æ¬¡è¾“å‡ºå°½é‡åŒ…å«ï¼š
-1ï¼‰ä¸€ä¸ªæ¸…æ™°ç—›ç‚¹ï¼›
-2ï¼‰ä¸€ä¸ªå¯æ‰§è¡Œçš„å°å»ºè®®æˆ–åšæ³•ï¼ˆæœ€å¥½å¸¦ç®€å•æ­¥éª¤/å…¬å¼/ç®—è´¦ç¤ºä¾‹ï¼‰ï¼›
-3ï¼‰å¿…è¦æ—¶åŠ å…¥ç®€çŸ­æ¡ˆä¾‹ï¼Œä½†ä¸è¿‡åº¦ä¼ å¥‡ï¼›
-4ï¼‰ç»“å°¾ç”¨è‡ªç„¶ã€ä¸ç”Ÿç¡¬çš„æ–¹å¼å¼•å¯¼ï¼šè¯„è®ºå…³é”®è¯é¢†å–æ¸…å•/é¿å‘æŒ‡å—ï¼Œæˆ–ç§ä¿¡æš—å·è·å–å±•å…èµ„æ–™ä¸è¯•æ°´æ–¹æ¡ˆã€‚
-
diff --git a/backend/agents/seach_agent.py b/backend/agents/seach_agent.py
index ea136ed..7893e89 100644
--- a/backend/agents/seach_agent.py
+++ b/backend/agents/seach_agent.py
@@ -5,12 +5,16 @@ from sentence_transformers import SentenceTransformer
 from agents.utils.llm_client import create_llm_client
 from agents.utils.prompt_loader import load_prompt
 
-SYSTEM_PROMPT_CONTENT_TOPIC = load_prompt("content_topic")
-
 
 class SearchAgent:
     
-    def __init__(self):
+    def __init__(self, agent_config: dict = None):
+        """
+        åˆå§‹åŒ– SearchAgent
+        
+        Args:
+            agent_config: æ™ºèƒ½ä½“é…ç½®ï¼ŒåŒ…å« default_prompt_dir
+        """
         self.embedding_model = SentenceTransformer('BAAI/bge-large-zh-v1.5')
         self.cg_chunks_index = faiss.read_index("database/cg_chunks_20251014.index")
         with open("database/cg_chunks_20251014.json", "r", encoding="utf-8") as f:
@@ -22,6 +26,12 @@ class SearchAgent:
             "llm_client": create_llm_client("deepseek"),
             "llm_model": "deepseek-chat"
         }
+        self.agent_config = agent_config or {}
+    
+    def _get_system_prompt(self) -> str:
+        """è·å–ç³»ç»Ÿæç¤ºè¯ï¼Œä½¿ç”¨ default_prompt_dir åŠ è½½"""
+        prompt_dir = self.agent_config.get("default_prompt_dir", "agents/prompts/")
+        return load_prompt("content_topic", prompt_dir)
 
     def local_search(self, queries, k):
         print("Entering local_search...")
@@ -37,8 +47,10 @@ class SearchAgent:
 
     def content_framework(self, chunks):
         print("Entering content_framework...")
+        system_prompt = self._get_system_prompt()
+        print("System prompt:", system_prompt)
         messages=[
-            {"role": "system", "content": SYSTEM_PROMPT_CONTENT_TOPIC},
+            {"role": "system", "content": system_prompt},
             {"role": "user", "content": f"{self.texts_retrieved}"}
             ]
         print("Sending messages to LLM...")
@@ -48,5 +60,5 @@ class SearchAgent:
             )
         print("Received response from LLM...")
         completion = response.choices[0].message.content
-        print(completion)
+        
         return completion
\ No newline at end of file
diff --git a/backend/agents/topic_analysis_agent.py b/backend/agents/topic_analysis_agent.py
index 2e588ea..1b31ede 100644
--- a/backend/agents/topic_analysis_agent.py
+++ b/backend/agents/topic_analysis_agent.py
@@ -3,20 +3,33 @@ from agents.utils.xml_parser import parse_topic_list, build_topic_xml
 from agents.utils.text_cleaner import clean_json_tags
 from agents.utils.prompt_loader import load_prompt
 
-SYSTEM_PROMPT_TOPIC_ANALYSIS = load_prompt("topic_analysis")
 
 class TopicAnalysisAgent:
 
-    def __init__(self):
+    def __init__(self, agent_config: dict = None):
+        """
+        åˆå§‹åŒ– TopicAnalysisAgent
+        
+        Args:
+            agent_config: æ™ºèƒ½ä½“é…ç½®ï¼ŒåŒ…å« default_prompt_dir
+        """
         self.module = {
             "llm_client": create_llm_client("deepseek"),
             "llm_model": "deepseek-chat"
         }
+        self.agent_config = agent_config or {}
+        
+    def _get_system_prompt(self) -> str:
+        """è·å–ç³»ç»Ÿæç¤ºè¯ï¼Œä½¿ç”¨ default_prompt_dir åŠ è½½"""
+        prompt_dir = self.agent_config.get("default_prompt_dir", "agents/prompts/")
+        return load_prompt("topic_analysis", prompt_dir)
 
     def analyze_topic(self, topic):
         print("Entering analyze_topic...")
+        system_prompt = self._get_system_prompt()
+        print("System prompt:", system_prompt)
         messages=[
-            {"role": "system", "content": SYSTEM_PROMPT_TOPIC_ANALYSIS},
+            {"role": "system", "content": system_prompt},
             {"role": "user", "content": f"{topic}"}
             ]
         print("Sending messages to LLM...")
diff --git a/backend/agents/utils/prompt_loader.py b/backend/agents/utils/prompt_loader.py
index d223d4e..0db2a42 100644
--- a/backend/agents/utils/prompt_loader.py
+++ b/backend/agents/utils/prompt_loader.py
@@ -1,20 +1,26 @@
 import os
 from pathlib import Path
 
-def load_prompt(prompt_name: str) -> str:
+def load_prompt(prompt_name: str, prompt_dir: str = None) -> str:
     """
     ä» prompts ç›®å½•åŠ è½½æç¤ºè¯æ–‡ä»¶
     
     Args:
         prompt_name: æç¤ºè¯æ–‡ä»¶åï¼ˆä¸å«æ‰©å±•åï¼‰ï¼Œå¦‚ 'draft', 'persona'
+        prompt_dir: å¯é€‰çš„è‡ªå®šä¹‰æç¤ºè¯ç›®å½•è·¯å¾„ï¼ˆç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•ï¼‰ï¼Œå¦‚ 'agents/prompts/'
     
     Returns:
         æç¤ºè¯å†…å®¹å­—ç¬¦ä¸²
     """
-    # è·å–å½“å‰æ–‡ä»¶æ‰€åœ¨ç›®å½•
-    current_dir = Path(__file__).parent
-    # prompts ç›®å½•åœ¨åŒä¸€å±‚çº§
-    prompts_dir = current_dir.parent / "prompts"
+    if prompt_dir:
+        # ä½¿ç”¨è‡ªå®šä¹‰ç›®å½•ï¼ˆç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•ï¼‰
+        project_root = Path(__file__).parent.parent.parent  # backend/
+        prompts_dir = project_root / prompt_dir
+    else:
+        # é»˜è®¤ç›®å½•ï¼šå½“å‰æ–‡ä»¶æ‰€åœ¨ç›®å½•çš„çˆ¶çº§çš„ prompts ç›®å½•
+        current_dir = Path(__file__).parent
+        prompts_dir = current_dir.parent / "prompts"
+    
     prompt_file = prompts_dir / f"{prompt_name}.md"
     
     if not prompt_file.exists():
diff --git a/backend/api/v1/agent_routes.py b/backend/api/v1/agent_routes.py
index a9101da..4cb994f 100644
--- a/backend/api/v1/agent_routes.py
+++ b/backend/api/v1/agent_routes.py
@@ -1,7 +1,8 @@
-from fastapi import APIRouter, HTTPException, status
+from fastapi import APIRouter, HTTPException, status, Body
 from pydantic import BaseModel
 from typing import Optional, Dict, List
 from services.agent_service import AgentService
+from utils import to_snake_case  # æ–°å¢å¯¼å…¥
 
 router = APIRouter()
 
@@ -9,15 +10,17 @@ router = APIRouter()
 class AgentCreate(BaseModel):
     """åˆ›å»ºçŸ¥èƒ½ä½“çš„è¯·æ±‚æ¨¡å‹"""
     title: Optional[str] = "æœªå‘½åæ™ºèƒ½ä½“"
+    persona_prompt: Optional[str] = ""
+    language_style_prompt: Optional[str] = ""
+    default_prompt_dir: Optional[str] = "agents/prompts/"
 
 
 class AgentUpdate(BaseModel):
     """æ›´æ–°çŸ¥èƒ½ä½“çš„è¯·æ±‚æ¨¡å‹"""
     title: Optional[str] = None
-    profile: Optional[str] = None
-    quadrant_prompt: Optional[str] = None
-    script_generation_prompt: Optional[str] = None
+    persona_prompt: Optional[str] = None
     language_style_prompt: Optional[str] = None
+    default_prompt_dir: Optional[str] = None
 
 
 @router.get("/agents")
@@ -65,10 +68,12 @@ def get_agent(agent_id: str):
 
 
 @router.post("/agents")
-def create_agent(agent_data: AgentCreate):
+def create_agent(agent_data: Dict = Body(...)):
     """åˆ›å»ºçŸ¥èƒ½ä½“"""
     try:
-        new_agent = AgentService.create_agent(agent_data.dict(exclude_unset=True))
+        # å‰ç«¯å‘ camelCaseï¼Œè½¬æˆ snake_case
+        snake_data = to_snake_case(agent_data)
+        new_agent = AgentService.create_agent(snake_data)
         return {
             "message": "åˆ›å»ºæˆåŠŸ",
             "agent": new_agent
@@ -81,13 +86,12 @@ def create_agent(agent_data: AgentCreate):
 
 
 @router.patch("/agents/{agent_id}")
-def update_agent(agent_id: str, update_data: AgentUpdate):
+def update_agent(agent_id: str, update_data: Dict = Body(...)):
     """éƒ¨åˆ†æ›´æ–°çŸ¥èƒ½ä½“æ•°æ®"""
     try:
-        updated_agent = AgentService.update_agent(
-            agent_id, 
-            update_data.dict(exclude_unset=True)
-        )
+        # å‰ç«¯å‘ camelCaseï¼Œè½¬æˆ snake_case
+        snake_data = to_snake_case(update_data)
+        updated_agent = AgentService.update_agent(agent_id, snake_data)
         return {
             "message": "æ›´æ–°æˆåŠŸ",
             "agent": updated_agent
diff --git a/backend/models/__init__.py b/backend/models/__init__.py
index d70e356..22b2b64 100644
--- a/backend/models/__init__.py
+++ b/backend/models/__init__.py
@@ -4,6 +4,7 @@ from .tag import Tag
 from .chat import Chat
 from .message import Message
 from .article import Article, article_tags
+from .agent import Agent
 
-__all__ = ["Base", "Tag", "Chat", "Message", "Article", "article_tags"]
+__all__ = ["Base", "Tag", "Chat", "Message", "Article", "article_tags", "Agent"]
 
diff --git a/backend/services/agent_service.py b/backend/services/agent_service.py
index d838113..5fddf30 100644
--- a/backend/services/agent_service.py
+++ b/backend/services/agent_service.py
@@ -66,10 +66,9 @@ class AgentService:
         new_agent = {
             "agent_id": uuid7(),
             "title": snake_data.get("title", "æœªå‘½åæ™ºèƒ½ä½“"),
-            "profile": "",
-            "quadrant_prompt": "",
-            "script_generation_prompt": "",
-            "language_style_prompt": ""
+            "persona_prompt": snake_data.get("persona_prompt", ""),
+            "language_style_prompt": snake_data.get("language_style_prompt", ""),
+            "default_prompt_dir": snake_data.get("default_prompt_dir", "agents/prompts/")
         }
         
         agents.append(new_agent)
diff --git a/backend/services/message_service.py b/backend/services/message_service.py
index bc79455..c8e437d 100644
--- a/backend/services/message_service.py
+++ b/backend/services/message_service.py
@@ -6,18 +6,47 @@ from sqlalchemy.ext.asyncio import AsyncSession
 from sqlalchemy.orm import selectinload
 from models.chat import Chat
 from models.message import Message
-from utils import uuid7, to_camel_case
+from utils import uuid7, to_camel_case, to_snake_case
 from agents import SearchAgent, TopicAnalysisAgent, DraftAgent, LanguageStyler
+from services.agent_service import AgentService
 
 
 class MessageService:
     """æ¶ˆæ¯ä¸šåŠ¡é€»è¾‘æœåŠ¡å±‚"""
 
     def __init__(self):
-        self.search_agent = SearchAgent()
-        self.topic_analysis_agent = TopicAnalysisAgent()
-        self.draft_agent = DraftAgent()
-        self.language_styler = LanguageStyler()
+        # agents å°†åœ¨ _init_agents ä¸­æ ¹æ® selected_agent åˆå§‹åŒ–
+        self.search_agent = None
+        self.topic_analysis_agent = None
+        self.draft_agent = None
+        self.language_styler = None
+        self._current_agent_id = None
+    
+    def _init_agents(self, selected_agent: str):
+        """æ ¹æ® selected_agent (agent_id) åˆå§‹åŒ–å„ä¸ª agent"""
+        # å¦‚æœå·²ç»æ˜¯åŒä¸€ä¸ª agentï¼Œä¸éœ€è¦é‡æ–°åˆå§‹åŒ–
+        if self._current_agent_id == selected_agent:
+            return
+        
+        # è·å– agent é…ç½®
+        agent_config = AgentService.get_agent_by_id(selected_agent)
+        if not agent_config:
+            # å¦‚æœæ‰¾ä¸åˆ°é…ç½®ï¼Œä½¿ç”¨é»˜è®¤é…ç½®
+            agent_config = {
+                "persona_prompt": "",
+                "language_style_prompt": "",
+                "default_prompt_dir": "agents/prompts/"
+            }
+        else:
+            # å°† camelCase è½¬æ¢å› snake_caseï¼Œå› ä¸º agent ç±»æœŸæœ› snake_case é”®å
+            agent_config = to_snake_case(agent_config)
+        
+        # ä½¿ç”¨ agent é…ç½®åˆå§‹åŒ–å„ä¸ª agent
+        self.search_agent = SearchAgent(agent_config)
+        self.topic_analysis_agent = TopicAnalysisAgent(agent_config)
+        self.draft_agent = DraftAgent(agent_config)
+        self.language_styler = LanguageStyler(agent_config)
+        self._current_agent_id = selected_agent
 
     @staticmethod
     async def create_chat(title: str, selected_agent: str, db: AsyncSession) -> str:
@@ -101,6 +130,9 @@ class MessageService:
 
     async def generate_content(self, topic: str, chat_id: str, selected_agent: str, db: AsyncSession) -> AsyncGenerator[str, None]:
         """å¤„ç†èŠå¤©æ¶ˆæ¯ç”Ÿæˆè¯·æ±‚"""
+        # æ ¹æ® selected_agent åˆå§‹åŒ–å„ä¸ª agent
+        self._init_agents(selected_agent)
+        
         journey_state = await MessageService.get_journey_state(chat_id, db)
 
         if journey_state == "0":
diff --git a/diff.txt b/diff.txt
index 70b9e7f..0699dc6 100644
--- a/diff.txt
+++ b/diff.txt
@@ -1,1959 +0,0 @@
-diff --git a/backend/agents/__init__.py b/backend/agents/__init__.py
-index 12caa7b..2a84f8c 100644
---- a/backend/agents/__init__.py
-+++ b/backend/agents/__init__.py
-@@ -1,9 +1,11 @@
- from .seach_agent import SearchAgent
- from .topic_analysis_agent import TopicAnalysisAgent
- from .draft_agent import DraftAgent
-+from .language_styler import LanguageStyler
- 
- __all__ = [
-     "SearchAgent",
-     "TopicAnalysisAgent",
--    "DraftAgent"
-+    "DraftAgent",
-+    "LanguageStyler"
- ]
-\ No newline at end of file
-diff --git a/backend/agents/language_styler.py b/backend/agents/language_styler.py
-index e694f4b..93c89b3 100644
---- a/backend/agents/language_styler.py
-+++ b/backend/agents/language_styler.py
-@@ -1,8 +1,8 @@
--from utils.llm_client import create_llm_client
--from utils.prompt_loader import load_prompt
-+from agents.utils.llm_client import create_llm_client
-+from agents.utils.prompt_loader import load_prompt
- 
- 
--SYSTEM_PROMPT = load_prompt("styling")
-+SYSTEM_PROMPT = load_prompt("language_style")
- 
- class LanguageStyler:
-     def __init__(self):
-diff --git a/backend/api/v1/article_routes.py b/backend/api/v1/article_routes.py
-index 4e3eb4f..6cf296c 100644
---- a/backend/api/v1/article_routes.py
-+++ b/backend/api/v1/article_routes.py
-@@ -13,6 +13,7 @@ class ArticleCreate(BaseModel):
-     source_platform: str = "å°çº¢ä¹¦"
-     author_name: str = ""
-     tags_by_author: str = ""
-+    content: str = ""  # æ–°å¢
- 
- 
- class ArticleUpdate(BaseModel):
-@@ -21,6 +22,7 @@ class ArticleUpdate(BaseModel):
-     source_platform: str | None = None
-     author_name: str | None = None
-     tags_by_author: str | None = None
-+    content: str | None = None  # æ–°å¢
- 
- 
- @router.get("/articles")
-diff --git a/backend/models/article.py b/backend/models/article.py
-index b6251c5..1aef81f 100644
---- a/backend/models/article.py
-+++ b/backend/models/article.py
-@@ -20,6 +20,7 @@ class Article(Base):
-     source_platform = Column(String, nullable=False, server_default="å°çº¢ä¹¦")
-     author_name = Column(String, server_default="")
-     tags_by_author = Column(String, server_default="")
-+    content = Column(String, server_default="")
-     created_at = Column(String, nullable=False)
-     updated_at = Column(String, nullable=False)
- 
-@@ -34,6 +35,7 @@ class Article(Base):
-             "sourcePlatform": self.source_platform,
-             "authorName": self.author_name,
-             "tagsByAuthor": self.tags_by_author,
-+            "content": self.content, 
-             "createdAt": self.created_at,
-             "updatedAt": self.updated_at
-         }
-diff --git a/backend/services/article_service.py b/backend/services/article_service.py
-index 6d0d6d1..3bc64a6 100644
---- a/backend/services/article_service.py
-+++ b/backend/services/article_service.py
-@@ -5,7 +5,7 @@ from typing import List, Dict, Optional
- from datetime import datetime
- from models.article import Article
- from models.tag import Tag
--from utils import to_camel_case
-+from utils import to_camel_case, uuid7
- 
- 
- class ArticleService:
-@@ -45,6 +45,7 @@ class ArticleService:
-         # åˆ›å»ºæ–°æ–‡ç« 
-         now = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
-         new_article = Article(
-+            article_id=uuid7(),
-             title=title.strip(),
-             date=date.strip(),
-             source_platform=source_platform.strip(),
-diff --git a/backend/services/message_service.py b/backend/services/message_service.py
-index 20b1caa..bc79455 100644
---- a/backend/services/message_service.py
-+++ b/backend/services/message_service.py
-@@ -106,7 +106,7 @@ class MessageService:
-         if journey_state == "0":
-             chunks = self.search_agent.local_search(topic, 4)
-             chunk_str = json.dumps({
--                "stage": 1,
-+                "is_status_message": False,
-                 "topic": topic,
-                 "generated_content": chunks
-             }) + "\n"
-@@ -116,28 +116,35 @@ class MessageService:
- 
-             status_msg = "æ­£åœ¨æ„æ€çš„é€‰é¢˜åˆ—è¡¨"
-             yield json.dumps({
--                "stage": 2,
-+                "is_status_message": True,
-                 "topic": topic,
-                 "generated_content": status_msg
-             }) + "\n"
- 
-             topic_list = self.search_agent.content_framework(chunks)
--            status_msg2 = "æ­£åœ¨åˆ†æé€‰é¢˜åˆ—è¡¨"
-+
-+            status_msg = "æ­£åœ¨åˆ†æé€‰é¢˜åˆ—è¡¨"
-             yield json.dumps({
--                "stage": 3,
-+                "is_status_message": True,
-                 "topic": topic,
--                "generated_content": status_msg2
-+                "generated_content": status_msg
-             }) + "\n"
- 
-             xml_topic = None
-             for xml_topic in self.topic_analysis_agent.analyze_topic_list(topic_list):
-                 chunk_str = json.dumps({
--                    "stage": 4,
-+                    "is_status_message": False,
-                     "topic": topic,
-                     "generated_content": xml_topic
-                 }) + "\n"
-                 yield chunk_str
--                
-+
-+                status_msg = "æ­£åœ¨åˆ†æé€‰é¢˜åˆ—è¡¨"
-+                yield json.dumps({
-+                    "is_status_message": True,
-+                    "topic": topic,
-+                    "generated_content": status_msg
-+                }) + "\n"                
-                 
-                 journey_state = "1"
-                 if xml_topic:
-@@ -148,7 +155,7 @@ class MessageService:
-         elif journey_state == "1":
-             status_msg = "æ­£åœ¨ç”Ÿæˆè‰ç¨¿"
-             yield json.dumps({
--                "stage": 5,
-+                "is_status_message": True,
-                 "topic": topic,
-                 "generated_content": status_msg
-             }) + "\n"
-@@ -156,7 +163,7 @@ class MessageService:
-             generated_draft = self.draft_agent.draft(topic)
-             
-             chunk_str = json.dumps({
--                "stage": 6,
-+                "is_status_message": False,
-                 "topic": topic,
-                 "generated_content": generated_draft
-             }) + "\n"
-@@ -168,14 +175,14 @@ class MessageService:
- 
-             status_msg = "æ­£åœ¨è¿›è¡Œè¯­è¨€é£æ ¼å¤„ç†ä¸­"
-             yield json.dumps({
--                "stage": 7,
-+                "is_status_message": True,
-                 "topic": topic,
-                 "generated_content": status_msg
-             }) + "\n"
-             
-             optimized_draft = self.language_styler.styler(generated_draft)
-             yield json.dumps({
--                "stage": 8,
-+                "is_status_message": False,
-                 "topic": topic,
-                 "generated_content": optimized_draft
-             }) + "\n"
-diff --git a/diff.txt b/diff.txt
-index e56ee99..723356f 100644
---- a/diff.txt
-+++ b/diff.txt
-@@ -1,1496 +0,0 @@
--diff --git a/backend/app.py b/backend/app.py
--index 7c8d3b8..2a63c2f 100644
----- a/backend/app.py
--+++ b/backend/app.py
--@@ -5,7 +5,7 @@ from pathlib import Path
-- from fastapi import FastAPI, File, UploadFile
-- from datetime import datetime
-- 
---from routes import chat_router, article_router, agent_router, tag_router, messages_router
--+from api.v1 import agent_router, chat_router, article_router, message_router, tag_router
-- 
-- # åˆå§‹åŒ–
-- app = FastAPI()
--@@ -13,11 +13,11 @@ UPLOAD_DIR = Path(__file__).parent / "database/uploads"
-- UPLOAD_DIR.mkdir(exist_ok=True)
-- TEXT_METADATA_FILE = UPLOAD_DIR / "texts_metadata.json"
-- 
---app.include_router(chat_router, prefix="/api")
---app.include_router(article_router, prefix="/api")
---app.include_router(agent_router, prefix="/api")
---app.include_router(tag_router, prefix="/api")
---app.include_router(messages_router, prefix="/api")
--+app.include_router(agent_router, prefix="/api/v1")
--+app.include_router(chat_router, prefix="/api/v1")
--+app.include_router(article_router, prefix="/api/v1")
--+app.include_router(message_router, prefix="/api/v1")
--+app.include_router(tag_router, prefix="/api/v1")
-- 
-- @app.post("/upload")
-- async def upload_file(file: UploadFile = File(...)):
--diff --git a/backend/routes/__init__.py b/backend/routes/__init__.py
--deleted file mode 100644
--index 618ef61..0000000
----- a/backend/routes/__init__.py
--+++ /dev/null
--@@ -1,13 +0,0 @@
---from .chat_routes import router as chat_router
---from .article_routes import router as article_router
---from .agent_routes import router as agent_router
---from .tag_routes import router as tag_router
---from .messages_routes import router as messages_router
---
---__all__ = [
---    "chat_router",
---    "article_router",
---    "agent_router",
---    "tag_router",
---    "messages_router",
---]
--\ No newline at end of file
--diff --git a/backend/routes/agent_routes.py b/backend/routes/agent_routes.py
--deleted file mode 100644
--index 79f74d0..0000000
----- a/backend/routes/agent_routes.py
--+++ /dev/null
--@@ -1,141 +0,0 @@
---import json
---from fastapi import APIRouter, HTTPException, status
---from config.settings import JSON_DEV_AGENTS_PATH
---from .utils import *
---
---router = APIRouter()
---
---@router.get("/agents")
---def get_agents():
---    """è¯»å–æ‰€æœ‰çŸ¥èƒ½ä½“æ•°æ®"""
---    if not JSON_DEV_AGENTS_PATH.exists():
---        return {"error": "çŸ¥èƒ½ä½“æ•°æ®æ–‡ä»¶ä¸å­˜åœ¨"}
---
---    with open(JSON_DEV_AGENTS_PATH, "r", encoding="utf-8") as f:
---        data = json.load(f)
---
---    return to_camel_case(data.get("agents", []))
---
---
---@router.get("/agents/menu")
---def get_agents_menu():
---    with open(JSON_DEV_AGENTS_PATH, "r", encoding="utf-8") as f:
---        agents = json.load(f).get("agents", [])
---    
---    agents = [{
---        "agent_id": agent.get("agent_id"),
---        "title": agent.get("title"),
---    } for agent in agents]
---
---    return to_camel_case(agents)
---
---@router.get("/agents/{agent_id}")
---def get_agent(agent_id: str):
---    """è¯»å–æŒ‡å®šçŸ¥èƒ½ä½“æ•°æ®"""
---    if not JSON_DEV_AGENTS_PATH.exists():
---        return {"error": "çŸ¥èƒ½ä½“æ•°æ®æ–‡ä»¶ä¸å­˜åœ¨"}
---    
---    with open(JSON_DEV_AGENTS_PATH, "r", encoding="utf-8") as f:
---        data = json.load(f)
---    
---    agents = data.get("agents", [])
---    
---    agent = next((a for a in agents if a.get("agent_id") == agent_id), None)
---
---    return to_camel_case(agent)
---
---
---@router.patch("/agents/{agent_id}")
---def update_agent(agent_id: str, update_data: dict):
---    """éƒ¨åˆ†æ›´æ–°çŸ¥èƒ½ä½“æ•°æ®"""
---    if not JSON_DEV_AGENTS_PATH.exists():
---        return {"error": "çŸ¥èƒ½ä½“æ•°æ®æ–‡ä»¶ä¸å­˜åœ¨"}
---
---    with open(JSON_DEV_AGENTS_PATH, "r", encoding="utf-8") as f:
---        data = json.load(f)
---
---    agents = data.get("agents", [])
---    target_agent = next((a for a in agents if a.get("agent_id") == agent_id), None)
---
---    if not target_agent:
---        return {"error": f"çŸ¥èƒ½ä½“ {agent_id} ä¸å­˜åœ¨"}
---
---    for key, value in to_snake_case(update_data).items():
---        target_agent[key] = value
---
---    with open(JSON_DEV_AGENTS_PATH, "w", encoding="utf-8") as f:
---        json.dump(data, f, ensure_ascii=False, indent=4)
---
---    return {"message": "æ›´æ–°æˆåŠŸ", "agent": target_agent}
---
---@router.post("/agents")
---def create_agent(agent_data: dict):
---    """åˆ›å»ºçŸ¥èƒ½ä½“"""
---    if not JSON_DEV_AGENTS_PATH.exists():
---        return {"error": "çŸ¥èƒ½ä½“æ•°æ®æ–‡ä»¶ä¸å­˜åœ¨"}
---    with open(JSON_DEV_AGENTS_PATH, "r", encoding="utf-8") as f:
---        data = json.load(f)
---    
---    agents = data.get("agents", [])
---
---    snake_data = to_snake_case(agent_data)
---
---    new_agent = {
---        "agent_id": uuid7(),
---        "title": snake_data.get("title", "æœªå‘½åæ™ºèƒ½ä½“"),
---        "profile": "",
---        "quadrant_prompt": "",
---        "script_generation_prompt": "",
---        "language_style_prompt": ""
---    }
---
---    agents.append(new_agent)
---    data["agents"] = agents
---
---    with open(JSON_DEV_AGENTS_PATH, "w", encoding="utf-8") as f:
---        json.dump(data, f, ensure_ascii=False, indent=4)
---
---    return {"message": "åˆ›å»ºæˆåŠŸ", "agent": to_camel_case(new_agent)}
---
---@router.delete("/agents/{agent_id}")
---def delete_agent(agent_id: str):
---    """
---    åˆ é™¤æŒ‡å®šçš„çŸ¥èƒ½ä½“
---    """
---    if not JSON_DEV_AGENTS_PATH.exists():
---        raise HTTPException(
---            status_code=status.HTTP_404_NOT_FOUND,
---            detail="çŸ¥èƒ½ä½“æ•°æ®æ–‡ä»¶ä¸å­˜åœ¨"
---        )
---
---    # è¯»å–ç°æœ‰æ•°æ®
---    with open(JSON_DEV_AGENTS_PATH, "r", encoding="utf-8") as f:
---        data = json.load(f)
---
---    agents = data.get("agents", [])
---
---    # æŸ¥æ‰¾ç›®æ ‡ agent çš„ç´¢å¼•
---    target_index = None
---    for i, agent in enumerate(agents):
---        if agent.get("agent_id") == agent_id:
---            target_index = i
---            break
---
---    if target_index is None:
---        raise HTTPException(
---            status_code=status.HTTP_404_NOT_FOUND,
---            detail=f"çŸ¥èƒ½ä½“ {agent_id} ä¸å­˜åœ¨"
---        )
---
---    # æ‰§è¡Œåˆ é™¤
---    deleted_agent = agents.pop(target_index)
---    data["agents"] = agents
---
---    # å†™å›æ–‡ä»¶
---    with open(JSON_DEV_AGENTS_PATH, "w", encoding="utf-8") as f:
---        json.dump(data, f, ensure_ascii=False, indent=4)
---
---    return {
---        "message": "åˆ é™¤æˆåŠŸ",
---        "deleted_agent": to_camel_case(deleted_agent)
---    }
--\ No newline at end of file
--diff --git a/backend/routes/article_routes.py b/backend/routes/article_routes.py
--deleted file mode 100644
--index 696005b..0000000
----- a/backend/routes/article_routes.py
--+++ /dev/null
--@@ -1,210 +0,0 @@
---import sqlite3
---from config.settings import DB_DEV_PATH
---from fastapi import APIRouter, HTTPException, status
---from .utils import *
---from pydantic import BaseModel
---from datetime import datetime
---
---router = APIRouter()
---
---class ArticleCreate(BaseModel):
---    title: str
---    date: str
---    source_platform: str = "å°çº¢ä¹¦"
---    author_name: str = ""
---    tags_by_author: str = ""
---
---class ArticleUpdate(BaseModel):
---    title: str | None = None
---    date: str | None = None
---    source_platform: str | None = None
---    author_name: str | None = None
---    tags_by_author: str | None = None
---
---@router.get("/articles")
---def get_articles():
---    """è¯»å–æ‰€æœ‰æ–‡ç« æ•°æ®ï¼ˆåŒ…å«å…³è”çš„æ ‡ç­¾ï¼‰"""
---    if not DB_DEV_PATH.exists():
---        return {"error": "æ•°æ®åº“æ–‡ä»¶ä¸å­˜åœ¨"}
---
---    conn = sqlite3.connect(DB_DEV_PATH)
---    conn.row_factory = dict_factory
---    cur = conn.cursor()
---
---    # è·å–æ‰€æœ‰æ–‡ç« 
---    cur.execute("""
---        SELECT article_id, title, date, source_platform, author_name, tags_by_author
---        FROM articles
---        ORDER BY article_id DESC
---    """)
---    articles = cur.fetchall()
---
---    # ä¸ºæ¯ç¯‡æ–‡ç« è·å–å…³è”çš„æ ‡ç­¾åç§°
---    for article in articles:
---        cur.execute("""
---            SELECT t.name
---            FROM tags t
---            INNER JOIN article_tags at ON t.tag_id = at.tag_id
---            WHERE at.article_id = ?
---        """, (article['article_id'],))
---        tags = cur.fetchall()
---        article['tags'] = ', '.join([tag['name'] for tag in tags]) if tags else ''
---
---    conn.close()
---    return to_camel_case(articles)
---
---@router.post("/articles", status_code=status.HTTP_201_CREATED)
---def create_article(article: ArticleCreate):
---    """åˆ›å»ºæ–°æ–‡ç« """
---    if not DB_DEV_PATH.exists():
---        raise HTTPException(status_code=500, detail="æ•°æ®åº“æ–‡ä»¶ä¸å­˜åœ¨")
---
---    conn = sqlite3.connect(DB_DEV_PATH)
---    conn.row_factory = dict_factory
---    cur = conn.cursor()
---
---    # æ£€æŸ¥æ ‡é¢˜æ˜¯å¦å·²å­˜åœ¨
---    cur.execute("SELECT article_id FROM articles WHERE title = ?", (article.title.strip(),))
---    if cur.fetchone():
---        conn.close()
---        raise HTTPException(status_code=400, detail="æ–‡ç« æ ‡é¢˜å·²å­˜åœ¨")
---
---    # åˆ›å»ºæ–°æ–‡ç« 
---    now = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
---    new_article = {
---        "title": article.title.strip(),
---        "date": article.date.strip(),
---        "source_platform": article.source_platform.strip(),
---        "author_name": article.author_name.strip(),
---        "tags_by_author": article.tags_by_author.strip(),
---        "created_at": now,
---        "updated_at": now
---    }
---
---    try:
---        cur.execute("""
---            INSERT INTO articles (
---                title, date, source_platform, author_name, tags_by_author,
---                created_at, updated_at
---            )
---            VALUES (
---                :title, :date, :source_platform, :author_name, :tags_by_author,
---                :created_at, :updated_at
---            )
---        """, new_article)
---        conn.commit()
---        
---        # è·å–æ’å…¥çš„ID
---        article_id = cur.lastrowid
---        new_article["article_id"] = article_id
---        
---    except Exception as e:
---        conn.close()
---        raise HTTPException(status_code=500, detail=f"åˆ›å»ºæ–‡ç« å¤±è´¥: {str(e)}")
---    
---    conn.close()
---    return to_camel_case(new_article)
---
---@router.put("/articles/{article_id}", status_code=status.HTTP_200_OK)
---def update_article(article_id: int, update_data: ArticleUpdate):
---    """
---    æ›´æ–°æŒ‡å®š article_id çš„æ–‡ç« 
---    - æ”¯æŒéƒ¨åˆ†æ›´æ–°ï¼ˆåªä¼ æƒ³æ”¹çš„å­—æ®µå°±è¡Œï¼‰
---    """
---    if not DB_DEV_PATH.exists():
---        raise HTTPException(status_code=404, detail="æ•°æ®åº“æ–‡ä»¶ä¸å­˜åœ¨")
---
---    conn = sqlite3.connect(DB_DEV_PATH)
---    conn.row_factory = dict_factory
---    cur = conn.cursor()
---
---    # æ£€æŸ¥æ–‡ç« æ˜¯å¦å­˜åœ¨
---    cur.execute("SELECT title, date, source_platform, author_name, tags_by_author FROM articles WHERE article_id = ?", (article_id,))
---    target_article = cur.fetchone()
---
---    if not target_article:
---        conn.close()
---        raise HTTPException(status_code=404, detail=f"æ–‡ç«  {article_id} ä¸å­˜åœ¨")
---
---    # å‡†å¤‡æ›´æ–°çš„å­—æ®µ
---    update_fields = []
---    update_values = []
---
---    if update_data.title is not None:
---        new_title = update_data.title.strip()
---        # æ ‡é¢˜é‡å¤æ£€æŸ¥
---        if new_title.lower() != target_article["title"].lower():
---            cur.execute("SELECT article_id FROM articles WHERE title = ? AND article_id != ?", 
---                       (new_title, article_id))
---            if cur.fetchone():
---                conn.close()
---                raise HTTPException(status_code=400, detail="æ–‡ç« æ ‡é¢˜å·²å­˜åœ¨")
---        update_fields.append("title = ?")
---        update_values.append(new_title)
---
---    if update_data.date is not None:
---        update_fields.append("date = ?")
---        update_values.append(update_data.date.strip())
---
---    if update_data.source_platform is not None:
---        update_fields.append("source_platform = ?")
---        update_values.append(update_data.source_platform.strip())
---
---    if update_data.author_name is not None:
---        update_fields.append("author_name = ?")
---        update_values.append(update_data.author_name.strip())
---
---    if update_data.tags_by_author is not None:
---        update_fields.append("tags_by_author = ?")
---        update_values.append(update_data.tags_by_author.strip())
---
---    if not update_fields:
---        conn.close()
---        return to_camel_case(target_article)
---
---    # æ·»åŠ  updated_at
---    update_fields.append("updated_at = ?")
---    update_values.append(datetime.now().strftime("%Y-%m-%d %H:%M:%S"))
---
---    # æ‰§è¡Œæ›´æ–°
---    update_values.append(article_id)
---    sql = f"UPDATE articles SET {', '.join(update_fields)} WHERE article_id = ?"
---    
---    try:
---        cur.execute(sql, update_values)
---        conn.commit()
---        
---        # è·å–æ›´æ–°åçš„æ•°æ®
---        cur.execute("SELECT * FROM articles WHERE article_id = ?", (article_id,))
---        updated_article = cur.fetchone()
---        conn.close()
---        
---        return to_camel_case(updated_article)
---    except Exception as e:
---        conn.close()
---        raise HTTPException(status_code=500, detail=f"æ›´æ–°å¤±è´¥: {str(e)}")
---
---@router.delete("/articles/{article_id}", status_code=status.HTTP_200_OK)
---def delete_article(article_id: int):
---    """åˆ é™¤æŒ‡å®š article_id çš„æ–‡ç« """
---    if not DB_DEV_PATH.exists():
---        raise HTTPException(status_code=500, detail="æ•°æ®åº“æ–‡ä»¶ä¸å­˜åœ¨")
---
---    conn = sqlite3.connect(DB_DEV_PATH)
---    conn.row_factory = dict_factory
---    cur = conn.cursor()
---
---    # æ£€æŸ¥æ–‡ç« æ˜¯å¦å­˜åœ¨
---    cur.execute("SELECT article_id FROM articles WHERE article_id = ?", (article_id,))
---    if not cur.fetchone():
---        conn.close()
---        raise HTTPException(status_code=404, detail=f"æ–‡ç«  {article_id} ä¸å­˜åœ¨")
---
---    try:
---        cur.execute("DELETE FROM articles WHERE article_id = ?", (article_id,))
---        conn.commit()
---        conn.close()
---        return {"message": f"æ–‡ç«  {article_id} å·²åˆ é™¤"}
---    except Exception as e:
---        conn.close()
---        raise HTTPException(status_code=500, detail=f"åˆ é™¤å¤±è´¥: {str(e)}")
--diff --git a/backend/routes/chat_routes.py b/backend/routes/chat_routes.py
--deleted file mode 100644
--index bca145b..0000000
----- a/backend/routes/chat_routes.py
--+++ /dev/null
--@@ -1,107 +0,0 @@
---import sqlite3
---from config.settings import DB_DEV_PATH
---from fastapi import APIRouter
---from .utils import *
---from pydantic import BaseModel
---class ChatUpdate(BaseModel):
---    title: str | None = None
---    updated_at: str | None = None   # å¦‚æœä½ è¦æ›´æ–°è¿™ä¸ªå­—æ®µ
---
---router = APIRouter()
---
---@router.get("/chats")
---def get_chats():
---    if not DB_DEV_PATH.exists():
---        return {"error": "æ•°æ®åº“æ–‡ä»¶ä¸å­˜åœ¨"}
---    conn = sqlite3.connect(DB_DEV_PATH)
---    conn.row_factory = dict_factory
---    cur = conn.cursor()
---    cur.execute("SELECT * FROM chats ORDER BY updated_at DESC")
---    data = cur.fetchall()
---    conn.close()
---    return to_camel_case(data)
---
---@router.get("/chat/{chat_id}/messages")
---def get_chat_messages(chat_id: str):
---    if not DB_DEV_PATH.exists():
---        return {"error": "æ•°æ®åº“æ–‡ä»¶ä¸å­˜åœ¨"}
---    conn = sqlite3.connect(DB_DEV_PATH)
---    conn.row_factory = dict_factory
---    cur = conn.cursor()
---    cur.execute("SELECT * FROM messages WHERE chat_id = ? ORDER BY message_id", (chat_id,))
---    data = cur.fetchall()
---    conn.close()
---    return to_camel_case(data)
---
---@router.patch("/chat/{chat_id}")
---def update_chat(chat_id: str, update_data: ChatUpdate):
---    if not DB_DEV_PATH.exists():
---        return {"error": "æ•°æ®åº“æ–‡ä»¶ä¸å­˜åœ¨"}
---    conn = sqlite3.connect(DB_DEV_PATH)
---    conn.row_factory = dict_factory
---    cur = conn.cursor()
---
---    fields = []
---    values = []
---
---    if update_data.title is not None:
---        fields.append("title = ?")
---        values.append(update_data.title)
---
---    if update_data.updated_at is not None:
---        fields.append("updated_at = ?")
---        values.append(update_data.updated_at)
---
---    if not fields:
---        return {"error": "æ²¡æœ‰å¯æ›´æ–°çš„å­—æ®µ"}
---
---    values.append(chat_id)
---
---    sql = f"UPDATE chats SET {', '.join(fields)} WHERE chat_id = ?"
---    
---    cur.execute(sql, tuple(values))
---    conn.commit()
---
---    if cur.rowcount == 0:
---        conn.close()
---        return {"error": "æ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„ chat_id"}
---
---    cur.execute("SELECT * FROM chats WHERE chat_id = ?", (chat_id,))
---    updated_row = cur.fetchone()
---
---    conn.close()
---    return to_camel_case(updated_row)
---
---@router.delete("/chat/{chat_id}")
---def delete_chat(chat_id: str):
---    """
---    åˆ é™¤æŒ‡å®šçš„èŠå¤©è®°å½•åŠå…¶ç›¸å…³æ¶ˆæ¯
---    """
---    if not DB_DEV_PATH.exists():
---        return {"error": "æ•°æ®åº“æ–‡ä»¶ä¸å­˜åœ¨"}
---    
---    conn = sqlite3.connect(DB_DEV_PATH)
---    conn.row_factory = dict_factory
---    cur = conn.cursor()
---    
---    # å…ˆæŸ¥è¯¢è¦åˆ é™¤çš„èŠå¤©è®°å½•
---    cur.execute("SELECT * FROM chats WHERE chat_id = ?", (chat_id,))
---    deleted_chat = cur.fetchone()
---    
---    if deleted_chat is None:
---        conn.close()
---        return {"error": f"èŠå¤©è®°å½• {chat_id} ä¸å­˜åœ¨"}
---    
---    # åˆ é™¤ç›¸å…³çš„æ¶ˆæ¯è®°å½•
---    cur.execute("DELETE FROM messages WHERE chat_id = ?", (chat_id,))
---    
---    # åˆ é™¤èŠå¤©è®°å½•
---    cur.execute("DELETE FROM chats WHERE chat_id = ?", (chat_id,))
---    
---    conn.commit()
---    conn.close()
---    
---    return {
---        "message": "åˆ é™¤æˆåŠŸ",
---        "deleted_chat": to_camel_case(deleted_chat)
---    }
--\ No newline at end of file
--diff --git a/backend/routes/database.py b/backend/routes/database.py
--deleted file mode 100644
--index 6b0a23d..0000000
----- a/backend/routes/database.py
--+++ /dev/null
--@@ -1,24 +0,0 @@
---# database.py
---from sqlalchemy.ext.asyncio import AsyncSession, create_async_engine
---from sqlalchemy.orm import sessionmaker
---from config.settings import DB_DEV_PATH
---from pathlib import Path
---
---
---# å¼‚æ­¥ SQLite å¼•æ“ï¼ˆå®Œç¾æ”¯æŒä½ ç°æœ‰çš„ app_dev.dbï¼‰
---engine = create_async_engine(
---    f"sqlite+aiosqlite:///{DB_DEV_PATH}",
---    echo=False,
---    future=True,
---    connect_args={"check_same_thread": False}  # SQLite å¿…é¡»åŠ è¿™è¡Œ
---)
---
---AsyncSessionLocal = sessionmaker(
---    bind=engine,
---    class_=AsyncSession,
---    expire_on_commit=False
---)
---
---async def get_db() -> AsyncSession:
---    async with AsyncSessionLocal() as session:
---        yield session
--\ No newline at end of file
--diff --git a/backend/routes/messages_routes.py b/backend/routes/messages_routes.py
--deleted file mode 100644
--index 0b2e00e..0000000
----- a/backend/routes/messages_routes.py
--+++ /dev/null
--@@ -1,169 +0,0 @@
---import json
---import sqlite3
---from datetime import datetime
---from fastapi import APIRouter, HTTPException
---from fastapi.responses import StreamingResponse
---from pydantic import BaseModel
---from typing import Dict, Optional
---from agents import SearchAgent, TopicAnalysisAgent, DraftAgent
---from config.settings import DB_DEV_PATH
---from .utils import uuid7, to_camel_case, dict_factory
---
---
---router = APIRouter()
---
---# åˆå§‹åŒ– agents
---search_agent = SearchAgent()
---topic_analysis_agent = TopicAnalysisAgent()
---draft_agent = DraftAgent()
---
---
---class UserQuery(BaseModel):
---    topic: str
---    chat_id: Optional[str] = None
---    selected_agent: str
---
---
---def create_chat(title: str, selected_agent: str) -> str:
---    """åˆ›å»ºæ–°çš„èŠå¤©è®°å½•ï¼Œè¿”å› chat_id"""
---    if not DB_DEV_PATH.exists():
---        raise HTTPException(status_code=500, detail="æ•°æ®åº“æ–‡ä»¶ä¸å­˜åœ¨")
---    
---    conn = sqlite3.connect(DB_DEV_PATH)
---    cur = conn.cursor()
---    
---    chat_id = uuid7()
---    now = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
---    
---    cur.execute(
---        "INSERT INTO chats (chat_id, title, selected_agent, created_at, updated_at) VALUES (?, ?, ?, ?, ?)",
---        (chat_id, title, selected_agent, now, now)
---    )
---    conn.commit()
---    conn.close()
---    
---    return chat_id
---
---def save_message(chat_id: str, content: str, role: str, journey_state: str):
---    """ä¿å­˜æ¶ˆæ¯åˆ°æ•°æ®åº“"""
---    if not DB_DEV_PATH.exists():
---        raise Exception("æ•°æ®åº“æ–‡ä»¶ä¸å­˜åœ¨")
---    
---    conn = sqlite3.connect(DB_DEV_PATH)
---    cur = conn.cursor()
---    
---    message_id = uuid7()
---    now = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
---    
---    cur.execute(
---        "INSERT INTO messages (message_id, chat_id, role, content, created_at, journey_state) VALUES (?, ?, ?, ?, ?, ?)",
---        (message_id, chat_id, role, content, now, journey_state)
---    )
---    
---    # æ›´æ–° chat çš„ updated_at
---    cur.execute(
---        "UPDATE chats SET updated_at = ? WHERE chat_id = ?",
---        (now, chat_id)
---    )
---    
---    conn.commit()
---    conn.close()
---    return message_id
---
---def get_journey_state(chat_id: str) -> str:
---    if not DB_DEV_PATH.exists():
---        raise Exception("æ•°æ®åº“æ–‡ä»¶ä¸å­˜åœ¨")
---    
---    conn = sqlite3.connect(DB_DEV_PATH)
---    cur = conn.cursor()
---    cur.execute("SELECT journey_state FROM messages WHERE chat_id = ? ORDER BY created_at DESC LIMIT 1", (chat_id,))
---    journey_state = cur.fetchone()[0]
---    conn.close()
---    return journey_state
---
---
---@router.post("/messages/begin")
---def begin_chat(request: UserQuery):
---    """
---    å¿«é€Ÿåˆ›å»ºä¼šè¯å¹¶è¿”å› chatId
---    è¿™æ˜¯ä¸€ä¸ªå¿«é€Ÿ ACT å›å¤ç«¯ç‚¹ï¼Œä¾¿äºå‰ç«¯ç«‹å³è·å¾— chatId
---    """
---    try:
---        chat_id = create_chat(request.topic, request.selected_agent)   
---        message_id = save_message(chat_id, journey_state="0", content=request.topic, role="user")
---
---        return {
---            "chatId": chat_id,
---            "messageId": message_id,
---            "title": request.topic or "æ–°å¯¹è¯",
---            "selectedAgent": request.selected_agent
---        }
---    except Exception as e:
---        raise HTTPException(status_code=500, detail=f"åˆ›å»ºä¼šè¯å¤±è´¥: {str(e)}")
---
---
---@router.post("/messages/stream")
---def generate_content(query: UserQuery):
---    """å¤„ç†èŠå¤©æ¶ˆæ¯ç”Ÿæˆè¯·æ±‚"""
---    topic = query.topic
---    chat_id = query.chat_id
---    selected_agent = query.selected_agent
---    journey_state = get_journey_state(chat_id)
---
---    def generate_and_save(journey_state):
---        if journey_state == "0":
---            chunks = search_agent.local_search(topic, 4)
---            chunk_str = json.dumps({
---                "stage": 1,
---                "topic": topic,
---                "generated_content": chunks
---            }) + "\n"
---            yield chunk_str
---            
---            save_message(chat_id, journey_state=journey_state, content=chunks, role="assistant")
---
---            status_msg = "æ­£åœ¨æ„æ€çš„é€‰é¢˜åˆ—è¡¨"
---            yield json.dumps({
---                "stage": 2,
---                "topic": topic,
---                "generated_content": status_msg
---            }) + "\n"
---
---            topic_list = search_agent.content_framework(chunks)
---            status_msg2 = "æ­£åœ¨åˆ†æé€‰é¢˜åˆ—è¡¨"
---            yield json.dumps({
---                "stage": 3,
---                "topic": topic,
---                "generated_content": status_msg2
---            }) + "\n"
---
---            for xml_topic in topic_analysis_agent.analyze_topic_list(topic_list):
---                chunk_str = json.dumps({
---                    "stage": 4,
---                    "topic": topic,
---                    "generated_content": xml_topic
---                }) + "\n"
---                yield chunk_str
---            
---            journey_state = "1"
---            save_message(chat_id, journey_state=journey_state, content=str(xml_topic), role="assistant")
---        elif journey_state == "1":
---            generated_draft = draft_agent.draft(topic)
---            chunk_str = json.dumps({
---                "stage": 5,
---                "topic": topic,
---                "generated_content": generated_draft
---            }) + "\n"
---            yield chunk_str
---            journey_state = "0"
---            save_message(chat_id, journey_state=journey_state, content=generated_draft, role="assistant")
---
---        else:
---            raise ValueError("Invalid journey")
---        
---    
---    return StreamingResponse(
---        generate_and_save(journey_state),
---        media_type="application/json"
---    )
---
--diff --git a/backend/routes/models/tag.py b/backend/routes/models/tag.py
--deleted file mode 100644
--index 67653f1..0000000
----- a/backend/routes/models/tag.py
--+++ /dev/null
--@@ -1,23 +0,0 @@
---from sqlalchemy import Column, String, text
---from sqlalchemy.orm import DeclarativeBase
---
---class Base(DeclarativeBase):
---    pass
---
---class Tag(Base):
---    __tablename__ = "tags"
---
---    tag_id = Column(String, primary_key=True)
---    name = Column(String, nullable=False, unique=True)
---    description = Column(String, server_default="")
---    origin_note = Column(String, server_default="")
---    created_at = Column(String, nullable=False)
---
---    def to_dict(self):
---        return {
---            "tagId": self.tag_id,
---            "name": self.name,
---            "description": self.description,
---            "originNote": self.origin_note,
---            "createdAt": self.created_at
---        }
--\ No newline at end of file
--diff --git a/backend/routes/tag_routes.py b/backend/routes/tag_routes.py
--deleted file mode 100644
--index 7f117cc..0000000
----- a/backend/routes/tag_routes.py
--+++ /dev/null
--@@ -1,93 +0,0 @@
---from sqlalchemy import select, text
---from fastapi import APIRouter, HTTPException, status, Depends
---from sqlalchemy.ext.asyncio import AsyncSession
---from .utils import *
---from pydantic import BaseModel, Field
---from typing import List
---from datetime import datetime
---from .models.tag import Tag
---from .database import get_db
---from typing import Optional
---
---router = APIRouter()
---
---class TagCreate(BaseModel):
---    name: str = Field(..., description="æ ‡ç­¾åç§°")
---    description: str = Field("", description="æ ‡ç­¾æè¿°")
---    origin_note: str = Field("", description="æ¥æºå¤‡æ³¨")
---
---class TagUpdate(BaseModel):
---    name: Optional[str] = Field(None, description="æ–°æ ‡ç­¾åï¼ˆå¯é€‰ï¼‰")
---    description: Optional[str] = Field(None, description="æ–°æè¿°ï¼ˆå¯é€‰ï¼‰")
---    origin_note: Optional[str] = Field(None, description="æ–°æ¥æºå¤‡æ³¨ï¼ˆå¯é€‰ï¼‰")
---
---@router.get("/tags", response_model=List[dict])
---async def get_tags(db: AsyncSession = Depends(get_db)):
---    result = await db.execute(select(Tag).order_by(Tag.created_at.desc()))
---    tags = result.scalars().all()
---    return to_camel_case([tag.to_dict() for tag in tags])
---   
---
---@router.post("/tags", status_code=status.HTTP_201_CREATED, response_model=dict)
---async def create_tag(tag_in: TagCreate, db: AsyncSession = Depends(get_db)):
---    name = tag_in.name.strip()
---    if not name:
---        raise HTTPException(status_code=400, detail="æ ‡ç­¾åä¸èƒ½ä¸ºç©º")
---
---    # æ£€æŸ¥é‡å¤ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰
---    result = await db.execute(
---        select(Tag).where(Tag.name.ilike(name))
---    )
---    if result.scalar_one_or_none():
---        raise HTTPException(status_code=400, detail="æ ‡ç­¾åå·²å­˜åœ¨")
---
---    new_tag = Tag(
---        tag_id=uuid7(),
---        name=name,
---        description=tag_in.description.strip(),
---        origin_note=tag_in.origin_note.strip(),
---        created_at=datetime.now().strftime("%Y-%m-%d %H:%M:%S")
---    )
---    db.add(new_tag)
---    await db.commit()
---    await db.refresh(new_tag)
---    return to_camel_case([new_tag.to_dict()])[0]
---
---@router.put("tags/{tag_id}", response_model=dict)
---async def update_tag(tag_id: str, tag_in: TagUpdate, db: AsyncSession = Depends(get_db)):
---    tag = await db.get(Tag, tag_id)
---    if not tag:
---        raise HTTPException(status_code=404, detail=f"æ ‡ç­¾ {tag_id} ä¸å­˜åœ¨")
---
---    # ç›´æ¥åˆ¤æ–­æ¯ä¸ªå­—æ®µæ˜¯å¦ä¼ å…¥ï¼ˆä¸ä¸º Noneï¼‰
---    if tag_in.name is not None:
---        new_name = tag_in.name.strip()
---        if not new_name:
---            raise HTTPException(status_code=400, detail="æ ‡ç­¾åä¸èƒ½ä¸ºç©º")
---        if new_name.lower() != tag.name.lower():
---            result = await db.execute(
---                select(Tag).where(Tag.name.ilike(new_name), Tag.tag_id != tag_id)
---            )
---            if result.scalar_one_or_none():
---                raise HTTPException(status_code=400, detail="æ ‡ç­¾åå·²å­˜åœ¨")
---        tag.name = new_name
---
---    if tag_in.description is not None:
---        tag.description = tag_in.description.strip()
---
---    if tag_in.origin_note is not None:
---        tag.origin_note = tag_in.origin_note.strip()
---
---    await db.commit()
---    await db.refresh(tag)
---    return to_camel_case([tag.to_dict()])[0]
---
---@router.delete("tags/{tag_id}", response_model=dict)
---async def delete_tag(tag_id: str, db: AsyncSession = Depends(get_db)):
---    tag = await db.get(Tag, tag_id)
---    if not tag:
---        raise HTTPException(status_code=404, detail=f"æ ‡ç­¾ {tag_id} ä¸å­˜åœ¨")
---
---    await db.delete(tag)
---    await db.commit()
---    return to_camel_case([tag.to_dict()])[0]
--\ No newline at end of file
--diff --git a/backend/routes/utils.py b/backend/routes/utils.py
--deleted file mode 100644
--index b522dec..0000000
----- a/backend/routes/utils.py
--+++ /dev/null
--@@ -1,48 +0,0 @@
---import time
---import os
---def dict_factory(cursor, row):
---    return {col[0]: row[idx] for idx, col in enumerate(cursor.description)}
---
---def to_camel_case(data):
---
---    def convert_key(key):
---        parts = key.split('_')
---        return parts[0] + ''.join(word.capitalize() for word in parts[1:])
---
---    if isinstance(data, dict):
---        return {convert_key(k): v for k, v in data.items()}
---
---    if isinstance(data, list):
---        return [{convert_key(k): v for k, v in item.items()} for item in data]
---
---    return data
---
---
---def to_snake_case(data):
---    def convert_key(key):
---        result = []
---        for i, char in enumerate(key):
---            if char.isupper() and i > 0:
---                result.append('_')
---            result.append(char.lower())
---        return ''.join(result)
---    return {convert_key(k): v for k, v in data.items()}
---
---def uuid7() -> str:
---    """ç”Ÿæˆæ ‡å‡†çš„ UUID v7 å­—ç¬¦ä¸²ï¼ˆå¸¦è¿å­—ç¬¦ï¼Œæ—¶é—´æœ‰åºï¼Œç¬¦åˆ RFC 9562ï¼‰"""
---    timestamp_ms = int(time.time() * 1000)
---    timestamp = timestamp_ms & 0xFFFFFFFFFFFF  # å–ä½48ä½
---
---    rand_bytes = os.urandom(10)
---    rand = int.from_bytes(rand_bytes, "big")
---
---    uuid_int = (
---        (timestamp << 80)                     # 48 ä½æ—¶é—´æˆ³
---        | (0x7 << 76)                         # version = 7
---        | ((rand & 0xFFF0000000000000) >> 12) # 12 ä½ rand_a
---        | (0x2 << 62)                         # variant = 10
---        | (rand & 0x3FFFFFFFFFFFFFFF)         # 62 ä½ rand_b
---    )
---
---    hex_str = f"{uuid_int:032x}"
---    return f"{hex_str[0:8]}-{hex_str[8:12]}-{hex_str[12:16]}-{hex_str[16:20]}-{hex_str[20:32]}"
--\ No newline at end of file
--diff --git a/frontend/src/components/chatbot/ChatInput.jsx b/frontend/src/components/chatbot/ChatInput.jsx
--index 302afa3..c7e2328 100644
----- a/frontend/src/components/chatbot/ChatInput.jsx
--+++ b/frontend/src/components/chatbot/ChatInput.jsx
--@@ -38,11 +38,13 @@ export function AgentLabel({ text, onClick, isFixed = false }) {
-- export default function ChatInput() {
-- 
--     const { state, actions } = useChat();
---    const { chatId } = useParams();
--+    const { chatId = "new" } = useParams();
--     const [selectedAgentId, setSelectedAgentId] = useState(actions.getSelectedAgentId(chatId));
--     
--     useEffect(() => {
---        chatId && setSelectedAgentId(actions.getSelectedAgentId(chatId));
--+        if (chatId !== "new") {
--+            setSelectedAgentId(actions.getSelectedAgentId(chatId));
--+        }
--     }, [chatId, actions]);
-- 
--     const selectedAgent = actions.getAgentById(selectedAgentId)
--@@ -79,7 +81,9 @@ export default function ChatInput() {
-- 
--     const updateSelectedAgentId = (agentId) => {
--         setSelectedAgentId(agentId);
---        chatId && actions.setSelectedAgentId(chatId, agentId);
--+        if (chatId !== "new") {
--+            actions.setSelectedAgentId(chatId, agentId);
--+        }
--     }
-- 
--     return (
--diff --git a/frontend/src/contexts/ChatContext.jsx b/frontend/src/contexts/ChatContext.jsx
--index 2d2b0b1..ec3cd25 100644
----- a/frontend/src/contexts/ChatContext.jsx
--+++ b/frontend/src/contexts/ChatContext.jsx
--@@ -5,12 +5,12 @@ import { useChatActions } from "@hooks/useChatActions";
-- export const ChatContext = createContext();
-- 
-- export default function ChatProvider({ children }) {
---
--     const state = useChatsState({
--         agents: [],
--         chats: [],
---        messages: []
--+        messages: {}
--     });
--+
--     const actions = useChatActions(state);
-- 
--     useEffect(() => {
--@@ -18,14 +18,14 @@ export default function ChatProvider({ children }) {
--         actions.loadAgents();
--     }, []);
-- 
---    console.log("Chats", state.chats);
--     return (
--         <ChatContext.Provider value={{ state, actions }}>
--             {children}
--         </ChatContext.Provider>
---    )
--+    );
-- }
-- 
--+
-- export function useChat() {
--     return useContext(ChatContext);
-- }
--\ No newline at end of file
--diff --git a/frontend/src/hooks/useChatActions.js b/frontend/src/hooks/useChatActions.js
--index 8149e02..7078675 100644
----- a/frontend/src/hooks/useChatActions.js
--+++ b/frontend/src/hooks/useChatActions.js
--@@ -1,6 +1,6 @@
---import { apiGet } from "@services/apiClient";
-- import { getChats, updateChat, deleteChat } from "@services/chatsService";
-- import { getAgents, createAgent, updateAgent, deleteAgent } from "@services/agentsService";
--+import { getMessages } from "@services/messagesService";
-- 
-- export function useChatActions(state) {
-- 
--@@ -40,27 +40,37 @@ export function useChatActions(state) {
--         }
--         state.setChats(prev => prev.filter(chat => chat.chatId !== chatId));
--     };
---
--+    
--     const loadMessages = async (chatId) => {
---            if (!chatId) {
---                state.setMessages([
---                    { role: "assistant", content: "ä½ å¥½ï¼Œè¿™æ˜¯æ–°çš„èŠå¤©çª—å£ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥å¸®ä½ ï¼Ÿ" }
---                ]);
---                return;
---            }
---
---            const { data, error } = await apiGet(`/api/chat/${chatId}/messages`);
---
---            if (error) {
---                state.setMessages([
---                    { role: "assistant", content: "âš ï¸ æ— æ³•åŠ è½½å†å²æ¶ˆæ¯ï¼Œè¯·ç¨åå†è¯•ã€‚" }
---                ]);
---                return;
---            }
---            
---            if (data?.length > 0) state.setMessages(data);
---            else state.setMessages([{ role: "assistant", content: "ä½ å¥½ï¼Œè¿™æ˜¯æ–°çš„èŠå¤©çª—å£ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥å¸®ä½ ï¼Ÿ" }]);
--+        // Initialize messages for this chat immediately to prevent undefined state
--+        if (!state.messages[chatId]) {
--+            state.setMessages(chatId, () => []);
--+        }
--+
--+        const { data, error } = await getMessages(chatId);
--+
--+        if (error) {
--+            state.setMessages(chatId, () => [
--+                { role: "assistant", content: "âš ï¸ æ— æ³•åŠ è½½å†å²æ¶ˆæ¯ï¼Œè¯·ç¨åå†è¯•ã€‚" }
--+            ]);
--+            return;
--+        }
--+
--+        state.setMessages(
--+            chatId,
--+            () => data?.length > 0
--+                ? data
--+                : [{ role: "assistant", content: "ä½ å¥½ï¼Œè¿™æ˜¯æ–°çš„èŠå¤©çª—å£ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥å¸®ä½ ï¼Ÿ" }]
--+        );
--+    };
--+
--+    // æ·»åŠ ä¸€æ¡æ¶ˆæ¯
--+    const addMessage = (chatId, message) => {
--+        state.setMessages(chatId, (prevMessages) => {
--+            return [...prevMessages, message];
--+        });
--     };
--+      
-- 
--     const loadAgents = async () => {
--         const { data, error } = await getAgents();
--@@ -123,6 +133,7 @@ export function useChatActions(state) {
--         updateChatByTitle,
--         deleteChatById,
--         loadMessages, 
--+        addMessage,
--         loadAgents, 
--         addAgent, 
--         updateAgentByField,
--diff --git a/frontend/src/hooks/useChatSend.js b/frontend/src/hooks/useChatSend.js
--deleted file mode 100644
--index cc75367..0000000
----- a/frontend/src/hooks/useChatSend.js
--+++ /dev/null
--@@ -1,88 +0,0 @@
---import { useRef } from "react";
---import { useNavigate } from "react-router-dom";
---import { beginChat, streamChat } from '@services/messagesService';
---import { useChat } from "@contexts/ChatContext";
---
---// è¾…åŠ©å‡½æ•°ï¼šå¤„ç†æµå¼æ•°æ®å—
---const processStreamChunk = (jsonStr, setMessages) => {
---    try {
---        const { stage, generated_content } = JSON.parse(jsonStr);
---        setMessages((prev) => {
---            // æŸ¥æ‰¾æ˜¯å¦å·²ç»æœ‰æ­£åœ¨ç”Ÿæˆçš„ assistant æ¶ˆæ¯
---            const index = prev.findIndex((msg) => msg.role === "assistant" && msg.stage === stage);
---            if (index !== -1) {
---                const updated = [...prev];
---                updated[index] = {
---                    ...updated[index],
---                    content: updated[index].content + "\n" + generated_content
---                };
---                return updated;
---            }
---            return [...prev, { role: "assistant", stage, content: generated_content }];
---        });
---    } catch (err) {
---        console.error("JSON parse error:", err, jsonStr);
---    }
---};
---
---export const useChatSend = (chatId, selectedAgentId, addChat, setMessages) => {
---    const navigate = useNavigate();
---
---    const handleSendMessage = async (message) => {
---        // ä¹è§‚æ›´æ–° UI
---        setMessages((prev) => [...prev, { role: "user", content: message }]);
---
---        let currentChatId = chatId;
---
---        if (!currentChatId) {
---            const { data, error } = await beginChat({
---                topic: message,
---                agent_id: selectedAgentId,
---                chat_id: null
---            });
---
---            if (error) {
---                console.error("å¼€å§‹èŠå¤©å¤±è´¥ï¼š", error);
---                // è¿™é‡Œå»ºè®®æ·»åŠ  UI é”™è¯¯æç¤ºé€»è¾‘
---                return;
---            }
---
---            currentChatId = data.chatId
---            addChat(data.chat);
---            navigate(`/chat/${currentChatId}`);
---        } 
---
---        try {
---            const response = await fetch("/api/messages/generate", {
---                method: "POST",
---                headers: { "Content-Type": "application/json" },
---                body: JSON.stringify({ topic: message, agent_id: selectedAgentId, chat_id: currentChatId })
---            });
---
---            if (!response.ok) throw new Error("Failed to fetch data");
---
---            const reader = response.body.getReader();
---            const decoder = new TextDecoder("utf-8");
---            let partialChunk = "";
---
---            while (true) {
---                const { done, value } = await reader.read();
---                if (done) break;
---
---                partialChunk += decoder.decode(value, { stream: true });
---                const parts = partialChunk.split("\n");
---                partialChunk = parts.pop();
---
---                for (const jsonStr of parts) {
---                    if (!jsonStr.trim()) continue;
---                    processStreamChunk(jsonStr, setMessages);
---                }
---            }
---        } catch (error) {
---            console.error("Streaming Error:", error);
---            setMessages((prev) => [...prev, { role: "assistant", content: "âš ï¸ è¿æ¥ä¸­æ–­ï¼Œè¯·é‡è¯•ã€‚" }]);
---        }
---    };
---
---    return { handleSendMessage };
---};
--\ No newline at end of file
--diff --git a/frontend/src/hooks/useChatState.js b/frontend/src/hooks/useChatState.js
--index d57e824..6483541 100644
----- a/frontend/src/hooks/useChatState.js
--+++ b/frontend/src/hooks/useChatState.js
--@@ -4,8 +4,26 @@ export function useChatsState() {
--     
--     const [chats, setChats] = useState([]);
--     const [agents, setAgents] = useState([]);
---    const [messages, setMessages] = useState([]);
-- 
---    return { chats, setChats, agents, setAgents, messages, setMessages };
--+    const [messages, setMessagesState] = useState({});
-- 
---}
--\ No newline at end of file
--+
--+    const setMessages = (chatId, updater) => {
--+        setMessagesState((prev) => {
--+            const newMessages = updater(prev[chatId] || []);
--+            return {
--+                ...prev,
--+                [chatId]: newMessages
--+            };
--+        });
--+    };
--+
--+    return {
--+        chats,
--+        setChats,
--+        agents,
--+        setAgents,
--+        messages,
--+        setMessages 
--+    };
--+}
--diff --git a/frontend/src/hooks/useChatStreaming.js b/frontend/src/hooks/useChatStreaming.js
--index fc60fb9..edd65ab 100644
----- a/frontend/src/hooks/useChatStreaming.js
--+++ b/frontend/src/hooks/useChatStreaming.js
--@@ -1,22 +1,25 @@
-- import { beginChat, streamChat } from "@services/messagesService";
-- import { useNavigate } from "react-router-dom";
-- 
---const processStreamChunk = (jsonStr, setMessages) => {
--+const processStreamChunk = (jsonStr, currentChatId, addMessage) => {
--     try {
--         const { stage, generated_content } = JSON.parse(jsonStr);
---        setMessages((prev) => {
---            // æŸ¥æ‰¾æ˜¯å¦å·²ç»æœ‰æ­£åœ¨ç”Ÿæˆçš„ assistant æ¶ˆæ¯
---            const index = prev.findIndex((msg) => msg.role === "assistant" && msg.stage === stage);
---            if (index !== -1) {
---                const updated = [...prev];
---                updated[index] = {
---                    ...updated[index],
---                    content: updated[index].content + "\n" + generated_content
---                };
---                return updated;
---            }
---            return [...prev, { role: "assistant", stage, content: generated_content }];
---        });
--+        const newAssistantMessage = { role: "assistant", stage, content: generated_content };
--+        addMessage(currentChatId, newAssistantMessage);
--+        
--+        // setMessages((prev) => {
--+        //     // æŸ¥æ‰¾æ˜¯å¦å·²ç»æœ‰æ­£åœ¨ç”Ÿæˆçš„ assistant æ¶ˆæ¯
--+        //     const index = prev.findIndex((msg) => msg.role === "assistant" && msg.stage === stage);
--+        //     if (index !== -1) {
--+        //         const updated = [...prev];
--+        //         updated[index] = {
--+        //             ...updated[index],
--+        //             content: updated[index].content + "\n" + generated_content
--+        //         };
--+        //         return updated;
--+        //     }
--+        //     return [...prev, { role: "assistant", stage, content: generated_content }];
--+        // });
--     } catch (err) {
--         console.error("JSON parse error:", err, jsonStr);
--     }
--@@ -28,15 +31,16 @@ export const useChatStreaming = (state, actions, {chatId = null, selectedAgentId
-- 
--     const handleSendMessage = async (message) => {
--         // ä¹è§‚æ›´æ–° UI
---        state.setMessages((prev) => [...prev, { role: "user", content: message }]);
--+        const newUserMessage = { role: "user", content: message };
-- 
--         let currentChatId = chatId;
--+        actions.addMessage(currentChatId, newUserMessage);
-- 
--         console.log("topic", message);
--         console.log("chat_id", currentChatId);
--         console.log("selected_agent", selectedAgentId);
-- 
---        if (!currentChatId) {
--+        if (currentChatId === "new") {
--             const { data, error } = await beginChat({
--                 topic: message,
--                 chat_id: currentChatId,
--@@ -52,6 +56,7 @@ export const useChatStreaming = (state, actions, {chatId = null, selectedAgentId
--             currentChatId = data.chatId
--             //actions.setSelectedAgentId(currentChatId, selectedAgentId);
--             actions.addChat(data);
--+            actions.addMessage(currentChatId, newUserMessage)
--             console.log("chat data returned", data);
--             navigate(`/chat/${currentChatId}`);
--         } 
--@@ -80,12 +85,13 @@ export const useChatStreaming = (state, actions, {chatId = null, selectedAgentId
-- 
--                 for (const jsonStr of parts) {
--                     if (!jsonStr.trim()) continue;
---                    processStreamChunk(jsonStr, state.setMessages);
--+                    processStreamChunk(jsonStr, currentChatId, actions.addMessage);
--                 }
--             }
--+
--         } catch (error) {
--             console.error("Streaming Error:", error);
---            state.setMessages((prev) => [...prev, { role: "assistant", content: "âš ï¸ è¿æ¥ä¸­æ–­ï¼Œè¯·é‡è¯•ã€‚" }]);
--+            actions.setMessages(currentChatId, () => [{ role: "assistant", content: "âš ï¸ è¿æ¥ä¸­æ–­ï¼Œè¯·é‡è¯•ã€‚" }]);
--         }
--     };
-- 
--diff --git a/frontend/src/pages/ChatPage.jsx b/frontend/src/pages/ChatPage.jsx
--index 89d5bc6..f60ab73 100644
----- a/frontend/src/pages/ChatPage.jsx
--+++ b/frontend/src/pages/ChatPage.jsx
--@@ -14,21 +14,29 @@ export function useChatPageContext() {
-- 
-- export default function ChatPage() {
-- 
---    const { chatId } = useParams();
--+    const { chatId = "new" } = useParams();
--     const { state, actions } = useChat();
-- 
--     const messagesEndRef = useRef(null);
-- 
--     // æ£€æŸ¥èŠå¤©æ˜¯å¦å­˜åœ¨ï¼ˆä»…å½“ chatId æœ‰å€¼æ—¶æ‰æ£€æŸ¥ï¼‰
---    const chatExists = !chatId || state.chats.some(chat => chat.chatId === chatId);
--+    const chatExists = chatId === "new" || state.chats.some(chat => chat.chatId === chatId);
-- 
--     useEffect(() => {
---        actions.loadMessages(chatId);
--+
--+
--+        if (chatId !== "new") {
--+            actions.loadMessages(chatId);
--+        } else {
--+            state.setMessages(chatId, () => [{ role: "assistant", content: "ä½ å¥½ï¼Œè¿™æ˜¯æ–°çš„èŠå¤©çª—å£ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥å¸®ä½ ï¼Ÿ" }]);
--+        }
--     }, [chatId]);
-- 
--+    const currentMessages = state.messages[chatId] || [];
--+
--     useEffect(() => {
--         messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
---    }, [state.messages]);
--+    }, [state.messages[chatId]]);
-- 
--     // å¦‚æœèŠå¤©ä¸å­˜åœ¨ï¼Œè·³è½¬åˆ°é¦–é¡µï¼ˆæ–°å»ºèŠå¤©é¡µé¢ï¼‰
--     if (!chatExists) {
--@@ -39,7 +47,7 @@ export default function ChatPage() {
--         <div className="chat-panel">
--             <div className="messages-container">
--                 <div className="messages-list">
---                    {state.messages.map((message, index) => {
--+                    {currentMessages.map((message, index) => {
--                         if (message.role === "user") {
--                             return <UserMessage key={index} message={message.content} />;
--                         } else {
--diff --git a/frontend/src/services/agentsService.js b/frontend/src/services/agentsService.js
--index c16cf4a..1a4eff2 100644
----- a/frontend/src/services/agentsService.js
--+++ b/frontend/src/services/agentsService.js
--@@ -1,25 +1,25 @@
-- import { apiGet, apiPatch, apiPost, apiDelete } from "./apiClient";
-- 
-- export function getAgents() {
---    return apiGet("/api/agents");
--+    return apiGet("/agents");
-- }
-- 
-- export function getAgentsMenu() {
---    return apiGet("/api/agents/menu");
--+    return apiGet("/agents/menu");
-- }
-- 
-- export function getAgent(agentId) {
---    return apiGet(`/api/agents/${agentId}`);
--+    return apiGet(`/agents/${agentId}`);
-- }
-- 
-- export function updateAgent(agentId, body) {
---    return apiPatch(`/api/agents/${agentId}`, body);
--+    return apiPatch(`/agents/${agentId}`, body);
-- }
-- 
-- export function createAgent(body) {
---    return apiPost("/api/agents", body);
--+    return apiPost("/agents", body);
-- }
-- 
-- export function deleteAgent(agentId) {
---    return apiDelete(`/api/agents/${agentId}`);
--+    return apiDelete(`/agents/${agentId}`);
-- }
--\ No newline at end of file
--diff --git a/frontend/src/services/apiClient.js b/frontend/src/services/apiClient.js
--index 2bf9894..a98bbfb 100644
----- a/frontend/src/services/apiClient.js
--+++ b/frontend/src/services/apiClient.js
--@@ -1,6 +1,12 @@
--+const API_PREFIX = "/api/v1";
--+const buildUrl = (url) => {
--+    return url.startsWith('/') ? `${API_PREFIX}${url}` : url;
--+}
--+
-- export async function apiGet(url) {
--     try {
---        const response = await fetch(url);
--+        const fullUrl = buildUrl(url);
--+        const response = await fetch(fullUrl);
-- 
--         if (!response.ok) {
--             throw new Error(`ç½‘ç»œé”™è¯¯ï¼š${response.status}`);
--@@ -16,7 +22,8 @@ export async function apiGet(url) {
-- 
-- export async function apiPatch(url, body) {
--     try {
---        const response = await fetch(url, {
--+        const fullUrl = buildUrl(url);
--+        const response = await fetch(fullUrl, {
--             method: 'PATCH',
--             headers: {
--                 'Content-Type': 'application/json',
--@@ -37,7 +44,8 @@ export async function apiPatch(url, body) {
-- }
-- export async function apiPost(url, body, { stream = false } = {}) {
--     try {
---        const response = await fetch(url, {
--+        const fullUrl = buildUrl(url);
--+        const response = await fetch(fullUrl, {
--             method: 'POST',
--             headers: {
--                 'Content-Type': 'application/json',
--@@ -63,7 +71,8 @@ export async function apiPost(url, body, { stream = false } = {}) {
-- 
-- export async function apiDelete(url) {
--     try {
---        const response = await fetch(url, {
--+        const fullUrl = buildUrl(url);
--+        const response = await fetch(fullUrl, {
--             method: 'DELETE',
--             // headers: {
--             //     'Content-Type': 'application/json',
--diff --git a/frontend/src/services/articlesService.js b/frontend/src/services/articlesService.js
--index c66216b..0ee0d41 100644
----- a/frontend/src/services/articlesService.js
--+++ b/frontend/src/services/articlesService.js
--@@ -1,13 +1,13 @@
-- import { apiGet, apiPost, apiDelete } from "./apiClient";
-- 
-- export function getArticles() {
---    return apiGet("/api/articles");
--+    return apiGet("/articles");
-- }
-- 
-- export function createArticle(articleData) {
---    return apiPost("/api/articles", articleData);
--+    return apiPost("/articles", articleData);
-- }
-- 
-- export function deleteArticle(articleId) {
---    return apiDelete(`/api/articles/${articleId}`);
--+    return apiDelete(`/articles/${articleId}`);
-- }
--\ No newline at end of file
--diff --git a/frontend/src/services/chatsService.js b/frontend/src/services/chatsService.js
--index 9c399f9..3fa97d8 100644
----- a/frontend/src/services/chatsService.js
--+++ b/frontend/src/services/chatsService.js
--@@ -1,14 +1,14 @@
-- import { apiGet, apiPatch, apiDelete } from "./apiClient";
-- 
-- export function getChats() {
---    return apiGet("/api/chats");
--+    return apiGet("/chats");
-- }
-- 
-- export function updateChat(chatId, body) {
---    return apiPatch(`/api/chat/${chatId}`, body);
--+    return apiPatch(`/chat/${chatId}`, body);
-- }
-- 
-- export function deleteChat(chatId) {
---    return apiDelete(`/api/chat/${chatId}`);
--+    return apiDelete(`/chat/${chatId}`);
-- }
-- 
--diff --git a/frontend/src/services/messagesService.js b/frontend/src/services/messagesService.js
--index 8f25891..c77e323 100644
----- a/frontend/src/services/messagesService.js
--+++ b/frontend/src/services/messagesService.js
--@@ -1,13 +1,13 @@
-- import { apiPost, apiGet } from "./apiClient";
-- 
-- export function beginChat(body) {
---    return apiPost("/api/messages/begin", body);
--+    return apiPost("/messages/begin", body);
-- }
-- 
-- export function streamChat(body) {
---    return apiPost("/api/messages/stream", body, { stream: true });
--+    return apiPost("/messages/stream", body, { stream: true });
-- }
-- 
-- export function getMessages(chatId) {
---    return apiGet(`/api/messages/${chatId}`);
--+    return apiGet(`/messages/${chatId}`);
-- }
--\ No newline at end of file
--diff --git a/frontend/src/services/tagsService.js b/frontend/src/services/tagsService.js
--index f05aacc..c4696e1 100644
----- a/frontend/src/services/tagsService.js
--+++ b/frontend/src/services/tagsService.js
--@@ -1,9 +1,9 @@
-- import { apiGet, apiPost } from "./apiClient";  
-- 
-- export function getTags() {
---    return apiGet("/api/tags");
--+    return apiGet("/tags");
-- }
-- 
-- export function createTag(tagData) {
---  return apiPost("/api/tags", tagData);   
--+  return apiPost("/tags", tagData);   
-- }
--\ No newline at end of file
-diff --git a/frontend/src/components/chatbot/ChatInput.css b/frontend/src/components/chatbot/ChatInput.css
-index f5f2dfb..2925c85 100644
---- a/frontend/src/components/chatbot/ChatInput.css
-+++ b/frontend/src/components/chatbot/ChatInput.css
-@@ -1,6 +1,6 @@
- .chat-input {
-   width: 100%;
--  max-width: 550px;
-+  max-width: 1000px;
-   display: flex;
-   flex-direction: column;
-   border: 1px solid #ccc;
-diff --git a/frontend/src/components/common/Button.jsx b/frontend/src/components/common/Button.jsx
-index 55571bd..d6be853 100644
---- a/frontend/src/components/common/Button.jsx
-+++ b/frontend/src/components/common/Button.jsx
-@@ -1,6 +1,6 @@
- const themeStyles = {
--    black: "px-5 py-1 text-sm bg-neutral-900 text-neutral-50 hover:bg-neutral-800 active:bg-neutral-700",
--    white: "px-5 py-1 text-sm bg-white text-neutral-900 border border-neutral-200 shadow-sm hover:bg-neutral-100 active:bg-neutral-50",
-+    black: "px-5 py-1 text-sm bg-neutral-900 text-neutral-50 hover:bg-neutral-800 active:bg-neutral-700 rounded-md",
-+    white: "px-5 py-1 text-sm bg-white text-neutral-900 border border-neutral-200 shadow-sm hover:bg-neutral-100 active:bg-neutral-50 rounded-md",
-     blackCircle: "w-10 h-10 bg-neutral-900 text-neutral-50 hover:bg-neutral-800 active:bg-neutral-700 rounded-full",
-     whiteCircle: "w-10 h-10 bg-white text-neutral-900 border border-neutral-200 shadow-sm hover:bg-neutral-100 active:bg-neutral-50 rounded-full"
- };
-diff --git a/frontend/src/components/layout/ArticleModal.jsx b/frontend/src/components/layout/ArticleModal.jsx
-index e8c9d46..13789d4 100644
---- a/frontend/src/components/layout/ArticleModal.jsx
-+++ b/frontend/src/components/layout/ArticleModal.jsx
-@@ -7,7 +7,8 @@ export default function ArticleModal({ isOpen, onClose, onSubmit }) {
-     date: "",
-     source_platform: "å°çº¢ä¹¦",  
-     author_name: "",            
--    tags_by_author: ""         
-+    tags_by_author: "",
-+    content: ""         
-   });
- 
-   if (!isOpen) return null;
-@@ -96,6 +97,20 @@ export default function ArticleModal({ isOpen, onClose, onSubmit }) {
-               />
-             </div>
- 
-+            <h3 className="font-semibold">æ–‡ç« å†…å®¹</h3>
-+
-+            <div>
-+              <label>å†…å®¹</label>
-+              <textarea
-+                name="content"
-+                value={formData.content}
-+                onChange={handleChange}
-+                placeholder="è¯·è¾“å…¥æ–‡ç« å†…å®¹..."
-+                rows={6}
-+                className="w-full px-3 py-2 border rounded-md resize-y"
-+              />
-+            </div>
-+
-           </div>
- 
-           <div className="flex justify-end gap-3 px-6 py-4 border-t">
-diff --git a/frontend/src/components/layout/ArticlesTable.css b/frontend/src/components/layout/ArticlesTable.css
-index 89f9045..c817b05 100644
---- a/frontend/src/components/layout/ArticlesTable.css
-+++ b/frontend/src/components/layout/ArticlesTable.css
-@@ -42,3 +42,11 @@
- .simple-table tbody tr:last-child td {
-     border-bottom: none;
- }
-+
-+/* content åˆ—æ–‡æœ¬æº¢å‡ºçœç•¥ */
-+.simple-table td:nth-child(7) {
-+    max-width: 200px;           /* æ ¹æ®éœ€è¦è°ƒæ•´æœ€å¤§å®½åº¦ */
-+    overflow: hidden;
-+    text-overflow: ellipsis;
-+    white-space: nowrap;
-+}
-diff --git a/frontend/src/components/layout/ArticlesTable.jsx b/frontend/src/components/layout/ArticlesTable.jsx
-index 8ff70ec..db762c1 100644
---- a/frontend/src/components/layout/ArticlesTable.jsx
-+++ b/frontend/src/components/layout/ArticlesTable.jsx
-@@ -3,8 +3,8 @@ import TableHeader from "./TableHeader";
- import TableBody from "./TableBody";
- 
- function ArticlesTable({ articles, onDelete }) {
--    const headers = ['æ ‡é¢˜', 'æ—¥æœŸ', 'æ¥æºå¹³å°', 'ä½œè€…', 'åŸå¹³å°æ ‡ç­¾', 'æ ‡ç­¾'];
--    const fields = ['title', 'date', 'sourcePlatform', 'authorName', 'tagsByAuthor', 'tags'];
-+    const headers = ['æ ‡é¢˜', 'æ—¥æœŸ', 'æ¥æºå¹³å°', 'ä½œè€…', 'åŸå¹³å°æ ‡ç­¾', 'æ ‡ç­¾', 'å†…å®¹'];
-+    const fields = ['title', 'date', 'sourcePlatform', 'authorName', 'tagsByAuthor', 'tags', 'content'];
-     
-     return (
-         <div className="table-wrapper">
-diff --git a/frontend/src/hooks/useChatState.js b/frontend/src/hooks/useChatState.js
-index eee9e01..da5711c 100644
---- a/frontend/src/hooks/useChatState.js
-+++ b/frontend/src/hooks/useChatState.js
-@@ -8,6 +8,7 @@ export function useChatsState() {
-     const [messages, setMessages] = useState({}); // chatId â†’ message[]
-     const [isLoaded, setIsLoaded] = useState({}); // chatId â†’ boolean
-     const [isStreaming, setIsStreaming] = useState({}); // chatId â†’ boolean
-+    const [statusMessage, setStatusMessage] = useState({}); // chatId â†’ string | null (ä¸´æ—¶çŠ¶æ€æç¤º)
- 
-     return {
-         chats,
-@@ -19,6 +20,8 @@ export function useChatsState() {
-         isLoaded,
-         setIsLoaded,
-         isStreaming,
--        setIsStreaming
-+        setIsStreaming,
-+        statusMessage,
-+        setStatusMessage
-     };
- }
-diff --git a/frontend/src/hooks/useChatStreaming.js b/frontend/src/hooks/useChatStreaming.js
-index 76a89eb..2141228 100644
---- a/frontend/src/hooks/useChatStreaming.js
-+++ b/frontend/src/hooks/useChatStreaming.js
-@@ -3,12 +3,24 @@ import { useNavigate } from "react-router-dom";
- import { useChat } from "@contexts/ChatContext";
- 
- 
--const processStreamChunk = (jsonStr, currentChatId, addMessage) => {
-+const processStreamChunk = (jsonStr, currentChatId, addMessage, setStatusMessage) => {
-     try {
--        const { stage, generated_content } = JSON.parse(jsonStr);
--        const newAssistantMessage = { role: "assistant", content: generated_content }
--        console.log("messages:", getMessages(currentChatId));
--        addMessage(currentChatId, newAssistantMessage);
-+        const { stage, generated_content, is_status_message, topic } = JSON.parse(jsonStr);
-+        
-+        console.log("æ”¶åˆ°æ¶ˆæ¯:", { is_status_message, generated_content });  // æ·»åŠ æ—¥å¿—
-+        
-+        if (is_status_message) {
-+            // çŠ¶æ€æ¶ˆæ¯ï¼šæ›´æ–°ä¸´æ—¶çŠ¶æ€ï¼Œä¸æ·»åŠ åˆ°æ¶ˆæ¯åˆ—è¡¨
-+            setStatusMessage(prev => ({ ...prev, [currentChatId]: generated_content }));
-+        } else {
-+            // çœŸæ­£å†…å®¹ï¼šæ¸…é™¤çŠ¶æ€æ¶ˆæ¯ï¼Œæ·»åŠ åˆ°æ¶ˆæ¯åˆ—è¡¨
-+            setStatusMessage(prev => ({ ...prev, [currentChatId]: null }));
-+            const newAssistantMessage = { 
-+                role: "assistant", 
-+                content: generated_content
-+            }
-+            addMessage(currentChatId, newAssistantMessage);
-+        }
-         
-         // setMessages((prev) => {
-         //     // æŸ¥æ‰¾æ˜¯å¦å·²ç»æœ‰æ­£åœ¨ç”Ÿæˆçš„ assistant æ¶ˆæ¯
-@@ -85,14 +97,19 @@ export const useChatStreaming = (chatId = null, selectedAgentId = null) => {
- 
-                 for (const jsonStr of parts) {
-                     if (!jsonStr.trim()) continue;
--                    processStreamChunk(jsonStr, currentChatId, actions.appendMessage);
-+                    processStreamChunk(jsonStr, currentChatId, actions.appendMessage, state.setStatusMessage);
-+                    // è®©å‡ºäº‹ä»¶å¾ªç¯ï¼Œç»™ React æ¸²æŸ“æœºä¼š
-+                    await new Promise(resolve => requestAnimationFrame(resolve));
-                 }
-             }
- 
-+            // æµç»“æŸæ—¶æ¸…é™¤çŠ¶æ€æ¶ˆæ¯
-+            state.setStatusMessage(prev => ({ ...prev, [currentChatId]: null }));
-             state.setIsStreaming(prev => ({ ...prev, [currentChatId]: false }));
- 
-         } catch (error) {
-             console.error("Streaming Error:", error);
-+            state.setStatusMessage(prev => ({ ...prev, [currentChatId]: null })); // å‡ºé”™ä¹Ÿæ¸…é™¤çŠ¶æ€
-             actions.appendMessage(currentChatId, [{ role: "assistant", content: "âš ï¸ è¿æ¥ä¸­æ–­ï¼Œè¯·é‡è¯•ã€‚" }]);
-         }
-     };
-diff --git a/frontend/src/pages/ChatPage.css b/frontend/src/pages/ChatPage.css
-index 4261a25..9b4a979 100644
---- a/frontend/src/pages/ChatPage.css
-+++ b/frontend/src/pages/ChatPage.css
-@@ -24,7 +24,7 @@
- 
- .messages-list {
-     width: 100%;
--    max-width: 550px;
-+    max-width: 1000px;
- }
- 
- .input-container {
-diff --git a/frontend/src/pages/ChatPage.jsx b/frontend/src/pages/ChatPage.jsx
-index 559e0a9..aa52705 100644
---- a/frontend/src/pages/ChatPage.jsx
-+++ b/frontend/src/pages/ChatPage.jsx
-@@ -1,6 +1,7 @@
- import ChatInput from "@components/chatbot/ChatInput";
- import UserMessage from "@components/chatbot/UserMessage";
- import AIMessage from "@components/chatbot/AIMessage";
-+import Loading from "@components/common/Loading";  // æ·»åŠ  Loading å¯¼å…¥
- import "./ChatPage.css";
- import { useChat } from "@contexts/ChatContext";
- import { useRef, useEffect } from "react";
-@@ -31,6 +32,7 @@ export default function ChatPage() {
-     }, [chatId]);
- 
-     const currentMessages = state.messages[chatId] ?? [];
-+    const currentStatusMessage = state.statusMessage?.[chatId];  // è·å–å½“å‰çŠ¶æ€æ¶ˆæ¯
- 
-     useEffect(() => {
-         messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
-@@ -52,6 +54,14 @@ export default function ChatPage() {
-                             return <AIMessage key={index} message={message.content} />;
-                         }
-                     })}
-+                    {/* ä¸´æ—¶çŠ¶æ€æ¶ˆæ¯ï¼šåœ¨æ¶ˆæ¯åˆ—è¡¨æœ«å°¾å•ç‹¬æ˜¾ç¤º */}
-+                    {currentStatusMessage && (
-+                        <Loading 
-+                            key={currentStatusMessage}  // æ·»åŠ  keyï¼Œæ–‡å­—å˜åŒ–æ—¶å¼ºåˆ¶é‡æ–°åˆ›å»ºç»„ä»¶
-+                            text={currentStatusMessage} 
-+                            className="mt-4"
-+                        />
-+                    )}
-                     <div ref={messagesEndRef} />
-                 </div>
-             </div>
-diff --git a/frontend/src/pages/TextbaseArticlesPage.jsx b/frontend/src/pages/TextbaseArticlesPage.jsx
-index 1d2e396..0a37b29 100644
---- a/frontend/src/pages/TextbaseArticlesPage.jsx
-+++ b/frontend/src/pages/TextbaseArticlesPage.jsx
-@@ -1,7 +1,7 @@
- import { useEffect, useState } from "react";
- import ArticlesTable from "@components/layout/ArticlesTable";
- import Pagination from "@components/layout/Pagination";
--import { getArticles, createArticle, deleteArticle } from "@services/articlesService";
-+import { getArticles, createArticle, deleteArticle, rebuildArticlesEmbedding } from "@services/articlesService";
- import Input from "@components/common/Input";
- import Button from "@components/common/Button";
- import ArticleModal from "@components/layout/ArticleModal";
-@@ -48,6 +48,17 @@ export default function TextbaseArticlesPage() {
-         setRows(prev => prev.filter(row => row.articleId !== articleId));
-     };
- 
-+    // å¤„ç†é‡å»ºç´¢å¼•
-+    const handleRebuildIndex = async () => {
-+        console.log("å¼€å§‹é‡å»ºç´¢å¼•...");
-+        const { data, error } = await rebuildArticlesEmbedding();
-+        if (error) {
-+            console.error("é‡å»ºç´¢å¼•å¤±è´¥ï¼š", error);
-+            return;
-+        }
-+        console.log("é‡å»ºç´¢å¼•å®Œæˆï¼", data);
-+    };
-+
-     // å¤„ç†æ–‡ç« æäº¤
-     const handleArticleSubmit = async (formData) => {
-         console.log("æäº¤çš„è¡¨å•æ•°æ®ï¼š", formData);
-@@ -79,7 +90,10 @@ export default function TextbaseArticlesPage() {
-                     value={searchValue}
-                     onChange={handleSearchChange}
-                 />
--                <Button onClick={handleAddClick} text="æ·»åŠ " />
-+                <div className="flex gap-2">
-+                    <Button onClick={handleRebuildIndex} text="é‡å»ºç´¢å¼•" theme="white" />
-+                    <Button onClick={handleAddClick} text="æ·»åŠ " />
-+                </div>
-             </div>
-             <div className="textbase-article__content flex flex-col px-8">
-                 <ArticlesTable articles={currentRows} onDelete={handleDeleteArticle} />
-diff --git a/frontend/src/services/articlesService.js b/frontend/src/services/articlesService.js
-index 0ee0d41..982e287 100644
---- a/frontend/src/services/articlesService.js
-+++ b/frontend/src/services/articlesService.js
-@@ -10,4 +10,8 @@ export function createArticle(articleData) {
- 
- export function deleteArticle(articleId) {
-     return apiDelete(`/articles/${articleId}`);
-+}
-+
-+export function rebuildArticlesEmbedding() {
-+    return apiPost("/articles/embedding");
- }
-\ No newline at end of file
diff --git a/frontend/src/pages/AgentPage.jsx b/frontend/src/pages/AgentPage.jsx
index 51b8bbf..d4f854d 100644
--- a/frontend/src/pages/AgentPage.jsx
+++ b/frontend/src/pages/AgentPage.jsx
@@ -22,9 +22,9 @@ function AgentPage() {
       <div className="agent-page-body flex-grow px-8 py-8">
         <PromptInput
           title="äººè®¾"
-          value={agent.profile}
+          value={agent.personaPrompt}
           placeholder="è¯·è¾“å…¥çŸ¥èƒ½ä½“çš„äººè®¾æè¿°..."
-          onConfirm={handleConfirm('profile')}
+          onConfirm={handleConfirm('personaPrompt')}
         />
         
         <PromptInput
